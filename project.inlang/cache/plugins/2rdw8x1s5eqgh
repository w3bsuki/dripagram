var Ft=Object.create;var kn=Object.defineProperty;var Bt=Object.getOwnPropertyDescriptor;var Ct=Object.getOwnPropertyNames;var $t=Object.getPrototypeOf,Kt=Object.prototype.hasOwnProperty;var En=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var kt=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let c of Ct(n))!Kt.call(e,c)&&c!==t&&kn(e,c,{get:()=>n[c],enumerable:!(r=Bt(n,c))||r.enumerable});return e};var Sn=(e,n,t)=>(t=e!=null?Ft($t(e)):{},kt(n||!e||!e.__esModule?kn(t,"default",{value:e,enumerable:!0}):t,e));var zn=En(l=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0});l.Type=l.JsonType=l.JavaScriptTypeBuilder=l.JsonTypeBuilder=l.TypeBuilder=l.TypeBuilderError=l.TransformEncodeBuilder=l.TransformDecodeBuilder=l.TemplateLiteralDslParser=l.TemplateLiteralGenerator=l.TemplateLiteralGeneratorError=l.TemplateLiteralFinite=l.TemplateLiteralFiniteError=l.TemplateLiteralParser=l.TemplateLiteralParserError=l.TemplateLiteralResolver=l.TemplateLiteralPattern=l.TemplateLiteralPatternError=l.UnionResolver=l.KeyArrayResolver=l.KeyArrayResolverError=l.KeyResolver=l.ObjectMap=l.Intrinsic=l.IndexedAccessor=l.TypeClone=l.TypeExtends=l.TypeExtendsResult=l.TypeExtendsError=l.ExtendsUndefined=l.TypeGuard=l.TypeGuardUnknownTypeError=l.ValueGuard=l.FormatRegistry=l.TypeBoxError=l.TypeRegistry=l.PatternStringExact=l.PatternNumberExact=l.PatternBooleanExact=l.PatternString=l.PatternNumber=l.PatternBoolean=l.Kind=l.Hint=l.Optional=l.Readonly=l.Transform=void 0;l.Transform=Symbol.for("TypeBox.Transform");l.Readonly=Symbol.for("TypeBox.Readonly");l.Optional=Symbol.for("TypeBox.Optional");l.Hint=Symbol.for("TypeBox.Hint");l.Kind=Symbol.for("TypeBox.Kind");l.PatternBoolean="(true|false)";l.PatternNumber="(0|[1-9][0-9]*)";l.PatternString="(.*)";l.PatternBooleanExact=`^${l.PatternBoolean}$`;l.PatternNumberExact=`^${l.PatternNumber}$`;l.PatternStringExact=`^${l.PatternString}$`;var Un;(function(e){let n=new Map;function t(){return new Map(n)}e.Entries=t;function r(){return n.clear()}e.Clear=r;function c(g){return n.delete(g)}e.Delete=c;function s(g){return n.has(g)}e.Has=s;function a(g,y){n.set(g,y)}e.Set=a;function p(g){return n.get(g)}e.Get=p})(Un||(l.TypeRegistry=Un={}));var W=class extends Error{constructor(n){super(n)}};l.TypeBoxError=W;var qn;(function(e){let n=new Map;function t(){return new Map(n)}e.Entries=t;function r(){return n.clear()}e.Clear=r;function c(g){return n.delete(g)}e.Delete=c;function s(g){return n.has(g)}e.Has=s;function a(g,y){n.set(g,y)}e.Set=a;function p(g){return n.get(g)}e.Get=p})(qn||(l.FormatRegistry=qn={}));var O;(function(e){function n(y){return Array.isArray(y)}e.IsArray=n;function t(y){return typeof y=="bigint"}e.IsBigInt=t;function r(y){return typeof y=="boolean"}e.IsBoolean=r;function c(y){return y===null}e.IsNull=c;function s(y){return typeof y=="number"}e.IsNumber=s;function a(y){return typeof y=="object"&&y!==null}e.IsObject=a;function p(y){return typeof y=="string"}e.IsString=p;function g(y){return y===void 0}e.IsUndefined=g})(O||(l.ValueGuard=O={}));var Ln=class extends W{};l.TypeGuardUnknownTypeError=Ln;var f;(function(e){function n(u){try{return new RegExp(u),!0}catch{return!1}}function t(u){if(!O.IsString(u))return!1;for(let F=0;F<u.length;F++){let q=u.charCodeAt(F);if(q>=7&&q<=13||q===27||q===127)return!1}return!0}function r(u){return a(u)||K(u)}function c(u){return O.IsUndefined(u)||O.IsBigInt(u)}function s(u){return O.IsUndefined(u)||O.IsNumber(u)}function a(u){return O.IsUndefined(u)||O.IsBoolean(u)}function p(u){return O.IsUndefined(u)||O.IsString(u)}function g(u){return O.IsUndefined(u)||O.IsString(u)&&t(u)&&n(u)}function y(u){return O.IsUndefined(u)||O.IsString(u)&&t(u)}function v(u){return O.IsUndefined(u)||K(u)}function m(u){return U(u,"Any")&&p(u.$id)}e.TAny=m;function w(u){return U(u,"Array")&&u.type==="array"&&p(u.$id)&&K(u.items)&&s(u.minItems)&&s(u.maxItems)&&a(u.uniqueItems)&&v(u.contains)&&s(u.minContains)&&s(u.maxContains)}e.TArray=w;function T(u){return U(u,"AsyncIterator")&&u.type==="AsyncIterator"&&p(u.$id)&&K(u.items)}e.TAsyncIterator=T;function I(u){return U(u,"BigInt")&&u.type==="bigint"&&p(u.$id)&&c(u.exclusiveMaximum)&&c(u.exclusiveMinimum)&&c(u.maximum)&&c(u.minimum)&&c(u.multipleOf)}e.TBigInt=I;function x(u){return U(u,"Boolean")&&u.type==="boolean"&&p(u.$id)}e.TBoolean=x;function S(u){return U(u,"Constructor")&&u.type==="Constructor"&&p(u.$id)&&O.IsArray(u.parameters)&&u.parameters.every(F=>K(F))&&K(u.returns)}e.TConstructor=S;function R(u){return U(u,"Date")&&u.type==="Date"&&p(u.$id)&&s(u.exclusiveMaximumTimestamp)&&s(u.exclusiveMinimumTimestamp)&&s(u.maximumTimestamp)&&s(u.minimumTimestamp)&&s(u.multipleOfTimestamp)}e.TDate=R;function L(u){return U(u,"Function")&&u.type==="Function"&&p(u.$id)&&O.IsArray(u.parameters)&&u.parameters.every(F=>K(F))&&K(u.returns)}e.TFunction=L;function j(u){return U(u,"Integer")&&u.type==="integer"&&p(u.$id)&&s(u.exclusiveMaximum)&&s(u.exclusiveMinimum)&&s(u.maximum)&&s(u.minimum)&&s(u.multipleOf)}e.TInteger=j;function C(u){return U(u,"Intersect")&&!(O.IsString(u.type)&&u.type!=="object")&&O.IsArray(u.allOf)&&u.allOf.every(F=>K(F)&&!xe(F))&&p(u.type)&&(a(u.unevaluatedProperties)||v(u.unevaluatedProperties))&&p(u.$id)}e.TIntersect=C;function Y(u){return U(u,"Iterator")&&u.type==="Iterator"&&p(u.$id)&&K(u.items)}e.TIterator=Y;function U(u,F){return ne(u)&&u[l.Kind]===F}e.TKindOf=U;function ne(u){return O.IsObject(u)&&l.Kind in u&&O.IsString(u[l.Kind])}e.TKind=ne;function Q(u){return h(u)&&O.IsString(u.const)}e.TLiteralString=Q;function Ce(u){return h(u)&&O.IsNumber(u.const)}e.TLiteralNumber=Ce;function mn(u){return h(u)&&O.IsBoolean(u.const)}e.TLiteralBoolean=mn;function h(u){return U(u,"Literal")&&p(u.$id)&&(O.IsBoolean(u.const)||O.IsNumber(u.const)||O.IsString(u.const))}e.TLiteral=h;function $e(u){return U(u,"Never")&&O.IsObject(u.not)&&Object.getOwnPropertyNames(u.not).length===0}e.TNever=$e;function M(u){return U(u,"Not")&&K(u.not)}e.TNot=M;function Oe(u){return U(u,"Null")&&u.type==="null"&&p(u.$id)}e.TNull=Oe;function we(u){return U(u,"Number")&&u.type==="number"&&p(u.$id)&&s(u.exclusiveMaximum)&&s(u.exclusiveMinimum)&&s(u.maximum)&&s(u.minimum)&&s(u.multipleOf)}e.TNumber=we;function le(u){return U(u,"Object")&&u.type==="object"&&p(u.$id)&&O.IsObject(u.properties)&&r(u.additionalProperties)&&s(u.minProperties)&&s(u.maxProperties)&&Object.entries(u.properties).every(([F,q])=>t(F)&&K(q))}e.TObject=le;function Pe(u){return U(u,"Promise")&&u.type==="Promise"&&p(u.$id)&&K(u.item)}e.TPromise=Pe;function Ke(u){return U(u,"Record")&&u.type==="object"&&p(u.$id)&&r(u.additionalProperties)&&O.IsObject(u.patternProperties)&&(F=>{let q=Object.getOwnPropertyNames(F.patternProperties);return q.length===1&&n(q[0])&&O.IsObject(F.patternProperties)&&K(F.patternProperties[q[0]])})(u)}e.TRecord=Ke;function In(u){return O.IsObject(u)&&l.Hint in u&&u[l.Hint]==="Recursive"}e.TRecursive=In;function ke(u){return U(u,"Ref")&&p(u.$id)&&O.IsString(u.$ref)}e.TRef=ke;function Me(u){return U(u,"String")&&u.type==="string"&&p(u.$id)&&s(u.minLength)&&s(u.maxLength)&&g(u.pattern)&&y(u.format)}e.TString=Me;function De(u){return U(u,"Symbol")&&u.type==="symbol"&&p(u.$id)}e.TSymbol=De;function te(u){return U(u,"TemplateLiteral")&&u.type==="string"&&O.IsString(u.pattern)&&u.pattern[0]==="^"&&u.pattern[u.pattern.length-1]==="$"}e.TTemplateLiteral=te;function _e(u){return U(u,"This")&&p(u.$id)&&O.IsString(u.$ref)}e.TThis=_e;function xe(u){return O.IsObject(u)&&l.Transform in u}e.TTransform=xe;function $(u){return U(u,"Tuple")&&u.type==="array"&&p(u.$id)&&O.IsNumber(u.minItems)&&O.IsNumber(u.maxItems)&&u.minItems===u.maxItems&&(O.IsUndefined(u.items)&&O.IsUndefined(u.additionalItems)&&u.minItems===0||O.IsArray(u.items)&&u.items.every(F=>K(F)))}e.TTuple=$;function qe(u){return U(u,"Undefined")&&u.type==="undefined"&&p(u.$id)}e.TUndefined=qe;function On(u){return re(u)&&u.anyOf.every(F=>Q(F)||Ce(F))}e.TUnionLiteral=On;function re(u){return U(u,"Union")&&p(u.$id)&&O.IsObject(u)&&O.IsArray(u.anyOf)&&u.anyOf.every(F=>K(F))}e.TUnion=re;function fe(u){return U(u,"Uint8Array")&&u.type==="Uint8Array"&&p(u.$id)&&s(u.minByteLength)&&s(u.maxByteLength)}e.TUint8Array=fe;function D(u){return U(u,"Unknown")&&p(u.$id)}e.TUnknown=D;function Ve(u){return U(u,"Unsafe")}e.TUnsafe=Ve;function Ee(u){return U(u,"Void")&&u.type==="void"&&p(u.$id)}e.TVoid=Ee;function wn(u){return O.IsObject(u)&&u[l.Readonly]==="Readonly"}e.TReadonly=wn;function Pn(u){return O.IsObject(u)&&u[l.Optional]==="Optional"}e.TOptional=Pn;function K(u){return O.IsObject(u)&&(m(u)||w(u)||x(u)||I(u)||T(u)||S(u)||R(u)||L(u)||j(u)||C(u)||Y(u)||h(u)||$e(u)||M(u)||Oe(u)||we(u)||le(u)||Pe(u)||Ke(u)||ke(u)||Me(u)||De(u)||te(u)||_e(u)||$(u)||qe(u)||re(u)||fe(u)||D(u)||Ve(u)||Ee(u)||ne(u)&&Un.Has(u[l.Kind]))}e.TSchema=K})(f||(l.TypeGuard=f={}));var Vn;(function(e){function n(t){return t[l.Kind]==="Intersect"?t.allOf.every(r=>n(r)):t[l.Kind]==="Union"?t.anyOf.some(r=>n(r)):t[l.Kind]==="Undefined"?!0:t[l.Kind]==="Not"?!n(t.not):!1}e.Check=n})(Vn||(l.ExtendsUndefined=Vn={}));var ze=class extends W{};l.TypeExtendsError=ze;var d;(function(e){e[e.Union=0]="Union",e[e.True=1]="True",e[e.False=2]="False"})(d||(l.TypeExtendsResult=d={}));var ie;(function(e){function n(i){return i===d.False?i:d.True}function t(i){throw new ze(i)}function r(i){return f.TNever(i)||f.TIntersect(i)||f.TUnion(i)||f.TUnknown(i)||f.TAny(i)}function c(i,o){return f.TNever(o)?U(i,o):f.TIntersect(o)?L(i,o):f.TUnion(o)?xn(i,o):f.TUnknown(o)?Kn(i,o):f.TAny(o)?s(i,o):t("StructuralRight")}function s(i,o){return d.True}function a(i,o){return f.TIntersect(o)?L(i,o):f.TUnion(o)&&o.anyOf.some(N=>f.TAny(N)||f.TUnknown(N))?d.True:f.TUnion(o)?d.Union:f.TUnknown(o)||f.TAny(o)?d.True:d.Union}function p(i,o){return f.TUnknown(i)?d.False:f.TAny(i)?d.Union:f.TNever(i)?d.True:d.False}function g(i,o){return f.TObject(o)&&te(o)?d.True:r(o)?c(i,o):f.TArray(o)?n(A(i.items,o.items)):d.False}function y(i,o){return r(o)?c(i,o):f.TAsyncIterator(o)?n(A(i.items,o.items)):d.False}function v(i,o){return r(o)?c(i,o):f.TObject(o)?$(i,o):f.TRecord(o)?D(i,o):f.TBigInt(o)?d.True:d.False}function m(i,o){return f.TLiteral(i)&&O.IsBoolean(i.const)||f.TBoolean(i)?d.True:d.False}function w(i,o){return r(o)?c(i,o):f.TObject(o)?$(i,o):f.TRecord(o)?D(i,o):f.TBoolean(o)?d.True:d.False}function T(i,o){return r(o)?c(i,o):f.TObject(o)?$(i,o):f.TConstructor(o)?i.parameters.length>o.parameters.length?d.False:i.parameters.every((N,J)=>n(A(o.parameters[J],N))===d.True)?n(A(i.returns,o.returns)):d.False:d.False}function I(i,o){return r(o)?c(i,o):f.TObject(o)?$(i,o):f.TRecord(o)?D(i,o):f.TDate(o)?d.True:d.False}function x(i,o){return r(o)?c(i,o):f.TObject(o)?$(i,o):f.TFunction(o)?i.parameters.length>o.parameters.length?d.False:i.parameters.every((N,J)=>n(A(o.parameters[J],N))===d.True)?n(A(i.returns,o.returns)):d.False:d.False}function S(i,o){return f.TLiteral(i)&&O.IsNumber(i.const)||f.TNumber(i)||f.TInteger(i)?d.True:d.False}function R(i,o){return f.TInteger(o)||f.TNumber(o)?d.True:r(o)?c(i,o):f.TObject(o)?$(i,o):f.TRecord(o)?D(i,o):d.False}function L(i,o){return o.allOf.every(N=>A(i,N)===d.True)?d.True:d.False}function j(i,o){return i.allOf.some(N=>A(N,o)===d.True)?d.True:d.False}function C(i,o){return r(o)?c(i,o):f.TIterator(o)?n(A(i.items,o.items)):d.False}function Y(i,o){return f.TLiteral(o)&&o.const===i.const?d.True:r(o)?c(i,o):f.TObject(o)?$(i,o):f.TRecord(o)?D(i,o):f.TString(o)?Ee(i,o):f.TNumber(o)?h(i,o):f.TInteger(o)?S(i,o):f.TBoolean(o)?m(i,o):d.False}function U(i,o){return d.False}function ne(i,o){return d.True}function Q(i){let[o,N]=[i,0];for(;f.TNot(o);)o=o.not,N+=1;return N%2===0?o:l.Type.Unknown()}function Ce(i,o){return f.TNot(i)?A(Q(i),o):f.TNot(o)?A(i,Q(o)):t("Invalid fallthrough for Not")}function mn(i,o){return r(o)?c(i,o):f.TObject(o)?$(i,o):f.TRecord(o)?D(i,o):f.TNull(o)?d.True:d.False}function h(i,o){return f.TLiteralNumber(i)||f.TNumber(i)||f.TInteger(i)?d.True:d.False}function $e(i,o){return r(o)?c(i,o):f.TObject(o)?$(i,o):f.TRecord(o)?D(i,o):f.TInteger(o)||f.TNumber(o)?d.True:d.False}function M(i,o){return Object.getOwnPropertyNames(i.properties).length===o}function Oe(i){return te(i)}function we(i){return M(i,0)||M(i,1)&&"description"in i.properties&&f.TUnion(i.properties.description)&&i.properties.description.anyOf.length===2&&(f.TString(i.properties.description.anyOf[0])&&f.TUndefined(i.properties.description.anyOf[1])||f.TString(i.properties.description.anyOf[1])&&f.TUndefined(i.properties.description.anyOf[0]))}function le(i){return M(i,0)}function Pe(i){return M(i,0)}function Ke(i){return M(i,0)}function In(i){return M(i,0)}function ke(i){return te(i)}function Me(i){let o=l.Type.Number();return M(i,0)||M(i,1)&&"length"in i.properties&&n(A(i.properties.length,o))===d.True}function De(i){return M(i,0)}function te(i){let o=l.Type.Number();return M(i,0)||M(i,1)&&"length"in i.properties&&n(A(i.properties.length,o))===d.True}function _e(i){let o=l.Type.Function([l.Type.Any()],l.Type.Any());return M(i,0)||M(i,1)&&"then"in i.properties&&n(A(i.properties.then,o))===d.True}function xe(i,o){return A(i,o)===d.False||f.TOptional(i)&&!f.TOptional(o)?d.False:d.True}function $(i,o){return f.TUnknown(i)?d.False:f.TAny(i)?d.Union:f.TNever(i)||f.TLiteralString(i)&&Oe(o)||f.TLiteralNumber(i)&&le(o)||f.TLiteralBoolean(i)&&Pe(o)||f.TSymbol(i)&&we(o)||f.TBigInt(i)&&Ke(o)||f.TString(i)&&Oe(o)||f.TSymbol(i)&&we(o)||f.TNumber(i)&&le(o)||f.TInteger(i)&&le(o)||f.TBoolean(i)&&Pe(o)||f.TUint8Array(i)&&ke(o)||f.TDate(i)&&In(o)||f.TConstructor(i)&&De(o)||f.TFunction(i)&&Me(o)?d.True:f.TRecord(i)&&f.TString(re(i))?(()=>o[l.Hint]==="Record"?d.True:d.False)():f.TRecord(i)&&f.TNumber(re(i))?(()=>M(o,0)?d.True:d.False)():d.False}function qe(i,o){return r(o)?c(i,o):f.TRecord(o)?D(i,o):f.TObject(o)?(()=>{for(let N of Object.getOwnPropertyNames(o.properties))if(!(N in i.properties)||xe(i.properties[N],o.properties[N])===d.False)return d.False;return d.True})():d.False}function On(i,o){return r(o)?c(i,o):f.TObject(o)&&_e(o)?d.True:f.TPromise(o)?n(A(i.item,o.item)):d.False}function re(i){return l.PatternNumberExact in i.patternProperties?l.Type.Number():l.PatternStringExact in i.patternProperties?l.Type.String():t("Unknown record key pattern")}function fe(i){return l.PatternNumberExact in i.patternProperties?i.patternProperties[l.PatternNumberExact]:l.PatternStringExact in i.patternProperties?i.patternProperties[l.PatternStringExact]:t("Unable to get record value schema")}function D(i,o){let[N,J]=[re(o),fe(o)];return f.TLiteralString(i)&&f.TNumber(N)&&n(A(i,J))===d.True?d.True:f.TUint8Array(i)&&f.TNumber(N)||f.TString(i)&&f.TNumber(N)||f.TArray(i)&&f.TNumber(N)?A(i,J):f.TObject(i)?(()=>{for(let At of Object.getOwnPropertyNames(i.properties))if(xe(J,i.properties[At])===d.False)return d.False;return d.True})():d.False}function Ve(i,o){return r(o)?c(i,o):f.TObject(o)?$(i,o):f.TRecord(o)?A(fe(i),fe(o)):d.False}function Ee(i,o){return f.TLiteral(i)&&O.IsString(i.const)||f.TString(i)?d.True:d.False}function wn(i,o){return r(o)?c(i,o):f.TObject(o)?$(i,o):f.TRecord(o)?D(i,o):f.TString(o)?d.True:d.False}function Pn(i,o){return r(o)?c(i,o):f.TObject(o)?$(i,o):f.TRecord(o)?D(i,o):f.TSymbol(o)?d.True:d.False}function K(i,o){return f.TTemplateLiteral(i)?A(Z.Resolve(i),o):f.TTemplateLiteral(o)?A(i,Z.Resolve(o)):t("Invalid fallthrough for TemplateLiteral")}function u(i,o){return f.TArray(o)&&i.items!==void 0&&i.items.every(N=>A(N,o.items)===d.True)}function F(i,o){return f.TNever(i)?d.True:f.TUnknown(i)?d.False:f.TAny(i)?d.Union:d.False}function q(i,o){return r(o)?c(i,o):f.TObject(o)&&te(o)||f.TArray(o)&&u(i,o)?d.True:f.TTuple(o)?O.IsUndefined(i.items)&&!O.IsUndefined(o.items)||!O.IsUndefined(i.items)&&O.IsUndefined(o.items)?d.False:O.IsUndefined(i.items)&&!O.IsUndefined(o.items)||i.items.every((N,J)=>A(N,o.items[J])===d.True)?d.True:d.False:d.False}function Et(i,o){return r(o)?c(i,o):f.TObject(o)?$(i,o):f.TRecord(o)?D(i,o):f.TUint8Array(o)?d.True:d.False}function St(i,o){return r(o)?c(i,o):f.TObject(o)?$(i,o):f.TRecord(o)?D(i,o):f.TVoid(o)?Rt(i,o):f.TUndefined(o)?d.True:d.False}function xn(i,o){return o.anyOf.some(N=>A(i,N)===d.True)?d.True:d.False}function Ut(i,o){return i.anyOf.every(N=>A(N,o)===d.True)?d.True:d.False}function Kn(i,o){return d.True}function Lt(i,o){return f.TNever(o)?U(i,o):f.TIntersect(o)?L(i,o):f.TUnion(o)?xn(i,o):f.TAny(o)?s(i,o):f.TString(o)?Ee(i,o):f.TNumber(o)?h(i,o):f.TInteger(o)?S(i,o):f.TBoolean(o)?m(i,o):f.TArray(o)?p(i,o):f.TTuple(o)?F(i,o):f.TObject(o)?$(i,o):f.TUnknown(o)?d.True:d.False}function Rt(i,o){return f.TUndefined(i)||f.TUndefined(i)?d.True:d.False}function jt(i,o){return f.TIntersect(o)?L(i,o):f.TUnion(o)?xn(i,o):f.TUnknown(o)?Kn(i,o):f.TAny(o)?s(i,o):f.TObject(o)?$(i,o):f.TVoid(o)?d.True:d.False}function A(i,o){return f.TTemplateLiteral(i)||f.TTemplateLiteral(o)?K(i,o):f.TNot(i)||f.TNot(o)?Ce(i,o):f.TAny(i)?a(i,o):f.TArray(i)?g(i,o):f.TBigInt(i)?v(i,o):f.TBoolean(i)?w(i,o):f.TAsyncIterator(i)?y(i,o):f.TConstructor(i)?T(i,o):f.TDate(i)?I(i,o):f.TFunction(i)?x(i,o):f.TInteger(i)?R(i,o):f.TIntersect(i)?j(i,o):f.TIterator(i)?C(i,o):f.TLiteral(i)?Y(i,o):f.TNever(i)?ne(i,o):f.TNull(i)?mn(i,o):f.TNumber(i)?$e(i,o):f.TObject(i)?qe(i,o):f.TRecord(i)?Ve(i,o):f.TString(i)?wn(i,o):f.TSymbol(i)?Pn(i,o):f.TTuple(i)?q(i,o):f.TPromise(i)?On(i,o):f.TUint8Array(i)?Et(i,o):f.TUndefined(i)?St(i,o):f.TUnion(i)?Ut(i,o):f.TUnknown(i)?Lt(i,o):f.TVoid(i)?jt(i,o):t(`Unknown left type operand '${i[l.Kind]}'`)}function Nt(i,o){return A(i,o)}e.Extends=Nt})(ie||(l.TypeExtends=ie={}));var P;(function(e){function n(a){let p=Object.getOwnPropertyNames(a).reduce((y,v)=>({...y,[v]:r(a[v])}),{}),g=Object.getOwnPropertySymbols(a).reduce((y,v)=>({...y,[v]:r(a[v])}),{});return{...p,...g}}function t(a){return a.map(p=>r(p))}function r(a){return O.IsArray(a)?t(a):O.IsObject(a)?n(a):a}function c(a){return a.map(p=>s(p))}e.Rest=c;function s(a,p={}){return{...r(a),...p}}e.Type=s})(P||(l.TypeClone=P={}));var Rn;(function(e){function n(T){return T.map(I=>{let{[l.Optional]:x,...S}=P.Type(I);return S})}function t(T){return T.every(I=>f.TOptional(I))}function r(T){return T.some(I=>f.TOptional(I))}function c(T){return t(T.allOf)?l.Type.Optional(l.Type.Intersect(n(T.allOf))):T}function s(T){return r(T.anyOf)?l.Type.Optional(l.Type.Union(n(T.anyOf))):T}function a(T){return T[l.Kind]==="Intersect"?c(T):T[l.Kind]==="Union"?s(T):T}function p(T,I){let x=T.allOf.reduce((S,R)=>{let L=m(R,I);return L[l.Kind]==="Never"?S:[...S,L]},[]);return a(l.Type.Intersect(x))}function g(T,I){let x=T.anyOf.map(S=>m(S,I));return a(l.Type.Union(x))}function y(T,I){let x=T.properties[I];return O.IsUndefined(x)?l.Type.Never():l.Type.Union([x])}function v(T,I){let x=T.items;if(O.IsUndefined(x))return l.Type.Never();let S=x[I];return O.IsUndefined(S)?l.Type.Never():S}function m(T,I){return T[l.Kind]==="Intersect"?p(T,I):T[l.Kind]==="Union"?g(T,I):T[l.Kind]==="Object"?y(T,I):T[l.Kind]==="Tuple"?v(T,I):l.Type.Never()}function w(T,I,x={}){let S=I.map(R=>m(T,R.toString()));return a(l.Type.Union(S,x))}e.Resolve=w})(Rn||(l.IndexedAccessor=Rn={}));var pe;(function(e){function n(v){let[m,w]=[v.slice(0,1),v.slice(1)];return`${m.toLowerCase()}${w}`}function t(v){let[m,w]=[v.slice(0,1),v.slice(1)];return`${m.toUpperCase()}${w}`}function r(v){return v.toUpperCase()}function c(v){return v.toLowerCase()}function s(v,m){let w=Te.ParseExact(v.pattern);if(!ye.Check(w))return{...v,pattern:a(v.pattern,m)};let x=[...ge.Generate(w)].map(L=>l.Type.Literal(L)),S=p(x,m),R=l.Type.Union(S);return l.Type.TemplateLiteral([R])}function a(v,m){return typeof v=="string"?m==="Uncapitalize"?n(v):m==="Capitalize"?t(v):m==="Uppercase"?r(v):m==="Lowercase"?c(v):v:v.toString()}function p(v,m){if(v.length===0)return[];let[w,...T]=v;return[y(w,m),...p(T,m)]}function g(v,m){return f.TTemplateLiteral(v)?s(v,m):f.TUnion(v)?l.Type.Union(p(v.anyOf,m)):f.TLiteral(v)?l.Type.Literal(a(v.const,m)):v}function y(v,m){return g(v,m)}e.Map=y})(pe||(l.Intrinsic=pe={}));var de;(function(e){function n(a,p){return l.Type.Intersect(a.allOf.map(g=>c(g,p)),{...a})}function t(a,p){return l.Type.Union(a.anyOf.map(g=>c(g,p)),{...a})}function r(a,p){return p(a)}function c(a,p){return a[l.Kind]==="Intersect"?n(a,p):a[l.Kind]==="Union"?t(a,p):a[l.Kind]==="Object"?r(a,p):a}function s(a,p,g){return{...c(P.Type(a),p),...g}}e.Map=s})(de||(l.ObjectMap=de={}));var Je;(function(e){function n(y){return y[0]==="^"&&y[y.length-1]==="$"?y.slice(1,y.length-1):y}function t(y,v){return y.allOf.reduce((m,w)=>[...m,...a(w,v)],[])}function r(y,v){let m=y.anyOf.map(w=>a(w,v));return[...m.reduce((w,T)=>T.map(I=>m.every(x=>x.includes(I))?w.add(I):w)[0],new Set)]}function c(y,v){return Object.getOwnPropertyNames(y.properties)}function s(y,v){return v.includePatterns?Object.getOwnPropertyNames(y.patternProperties):[]}function a(y,v){return f.TIntersect(y)?t(y,v):f.TUnion(y)?r(y,v):f.TObject(y)?c(y,v):f.TRecord(y)?s(y,v):[]}function p(y,v){return[...new Set(a(y,v))]}e.ResolveKeys=p;function g(y){return`^(${p(y,{includePatterns:!0}).map(w=>`(${n(w)})`).join("|")})$`}e.ResolvePattern=g})(Je||(l.KeyResolver=Je={}));var We=class extends W{};l.KeyArrayResolverError=We;var Se;(function(e){function n(t){return Array.isArray(t)?t:f.TUnionLiteral(t)?t.anyOf.map(r=>r.const.toString()):f.TLiteral(t)?[t.const]:f.TTemplateLiteral(t)?(()=>{let r=Te.ParseExact(t.pattern);if(!ye.Check(r))throw new We("Cannot resolve keys from infinite template expression");return[...ge.Generate(r)]})():[]}e.Resolve=n})(Se||(l.KeyArrayResolver=Se={}));var jn;(function(e){function*n(r){for(let c of r.anyOf)c[l.Kind]==="Union"?yield*n(c):yield c}function t(r){return l.Type.Union([...n(r)],{...r})}e.Resolve=t})(jn||(l.UnionResolver=jn={}));var He=class extends W{};l.TemplateLiteralPatternError=He;var Qe;(function(e){function n(s){throw new He(s)}function t(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function r(s,a){return f.TTemplateLiteral(s)?s.pattern.slice(1,s.pattern.length-1):f.TUnion(s)?`(${s.anyOf.map(p=>r(p,a)).join("|")})`:f.TNumber(s)?`${a}${l.PatternNumber}`:f.TInteger(s)?`${a}${l.PatternNumber}`:f.TBigInt(s)?`${a}${l.PatternNumber}`:f.TString(s)?`${a}${l.PatternString}`:f.TLiteral(s)?`${a}${t(s.const.toString())}`:f.TBoolean(s)?`${a}${l.PatternBoolean}`:n(`Unexpected Kind '${s[l.Kind]}'`)}function c(s){return`^${s.map(a=>r(a,"")).join("")}$`}e.Create=c})(Qe||(l.TemplateLiteralPattern=Qe={}));var Z;(function(e){function n(t){let r=Te.ParseExact(t.pattern);if(!ye.Check(r))return l.Type.String();let c=[...ge.Generate(r)].map(s=>l.Type.Literal(s));return l.Type.Union(c)}e.Resolve=n})(Z||(l.TemplateLiteralResolver=Z={}));var Ue=class extends W{};l.TemplateLiteralParserError=Ue;var Te;(function(e){function n(T,I,x){return T[I]===x&&T.charCodeAt(I-1)!==92}function t(T,I){return n(T,I,"(")}function r(T,I){return n(T,I,")")}function c(T,I){return n(T,I,"|")}function s(T){if(!(t(T,0)&&r(T,T.length-1)))return!1;let I=0;for(let x=0;x<T.length;x++)if(t(T,x)&&(I+=1),r(T,x)&&(I-=1),I===0&&x!==T.length-1)return!1;return!0}function a(T){return T.slice(1,T.length-1)}function p(T){let I=0;for(let x=0;x<T.length;x++)if(t(T,x)&&(I+=1),r(T,x)&&(I-=1),c(T,x)&&I===0)return!0;return!1}function g(T){for(let I=0;I<T.length;I++)if(t(T,I))return!0;return!1}function y(T){let[I,x]=[0,0],S=[];for(let L=0;L<T.length;L++)if(t(T,L)&&(I+=1),r(T,L)&&(I-=1),c(T,L)&&I===0){let j=T.slice(x,L);j.length>0&&S.push(m(j)),x=L+1}let R=T.slice(x);return R.length>0&&S.push(m(R)),S.length===0?{type:"const",const:""}:S.length===1?S[0]:{type:"or",expr:S}}function v(T){function I(R,L){if(!t(R,L))throw new Ue("TemplateLiteralParser: Index must point to open parens");let j=0;for(let C=L;C<R.length;C++)if(t(R,C)&&(j+=1),r(R,C)&&(j-=1),j===0)return[L,C];throw new Ue("TemplateLiteralParser: Unclosed group parens in expression")}function x(R,L){for(let j=L;j<R.length;j++)if(t(R,j))return[L,j];return[L,R.length]}let S=[];for(let R=0;R<T.length;R++)if(t(T,R)){let[L,j]=I(T,R),C=T.slice(L,j+1);S.push(m(C)),R=j}else{let[L,j]=x(T,R),C=T.slice(L,j);C.length>0&&S.push(m(C)),R=j-1}return S.length===0?{type:"const",const:""}:S.length===1?S[0]:{type:"and",expr:S}}function m(T){return s(T)?m(a(T)):p(T)?y(T):g(T)?v(T):{type:"const",const:T}}e.Parse=m;function w(T){return m(T.slice(1,T.length-1))}e.ParseExact=w})(Te||(l.TemplateLiteralParser=Te={}));var Ze=class extends W{};l.TemplateLiteralFiniteError=Ze;var ye;(function(e){function n(a){throw new Ze(a)}function t(a){return a.type==="or"&&a.expr.length===2&&a.expr[0].type==="const"&&a.expr[0].const==="0"&&a.expr[1].type==="const"&&a.expr[1].const==="[1-9][0-9]*"}function r(a){return a.type==="or"&&a.expr.length===2&&a.expr[0].type==="const"&&a.expr[0].const==="true"&&a.expr[1].type==="const"&&a.expr[1].const==="false"}function c(a){return a.type==="const"&&a.const===".*"}function s(a){return r(a)?!0:t(a)||c(a)?!1:a.type==="and"?a.expr.every(p=>s(p)):a.type==="or"?a.expr.every(p=>s(p)):a.type==="const"?!0:n("Unknown expression type")}e.Check=s})(ye||(l.TemplateLiteralFinite=ye={}));var Xe=class extends W{};l.TemplateLiteralGeneratorError=Xe;var ge;(function(e){function*n(a){if(a.length===1)return yield*a[0];for(let p of a[0])for(let g of n(a.slice(1)))yield`${p}${g}`}function*t(a){return yield*n(a.expr.map(p=>[...s(p)]))}function*r(a){for(let p of a.expr)yield*s(p)}function*c(a){return yield a.const}function*s(a){return a.type==="and"?yield*t(a):a.type==="or"?yield*r(a):a.type==="const"?yield*c(a):(()=>{throw new Xe("Unknown expression")})()}e.Generate=s})(ge||(l.TemplateLiteralGenerator=ge={}));var Nn;(function(e){function*n(s){let a=s.trim().replace(/"|'/g,"");return a==="boolean"?yield l.Type.Boolean():a==="number"?yield l.Type.Number():a==="bigint"?yield l.Type.BigInt():a==="string"?yield l.Type.String():yield(()=>{let p=a.split("|").map(g=>l.Type.Literal(g.trim()));return p.length===0?l.Type.Never():p.length===1?p[0]:l.Type.Union(p)})()}function*t(s){if(s[1]!=="{"){let a=l.Type.Literal("$"),p=r(s.slice(1));return yield*[a,...p]}for(let a=2;a<s.length;a++)if(s[a]==="}"){let p=n(s.slice(2,a)),g=r(s.slice(a+1));return yield*[...p,...g]}yield l.Type.Literal(s)}function*r(s){for(let a=0;a<s.length;a++)if(s[a]==="$"){let p=l.Type.Literal(s.slice(0,a)),g=t(s.slice(a));return yield*[p,...g]}yield l.Type.Literal(s)}function c(s){return[...r(s)]}e.Parse=c})(Nn||(l.TemplateLiteralDslParser=Nn={}));var Ye=class{constructor(n){this.schema=n}Decode(n){return new he(this.schema,n)}};l.TransformDecodeBuilder=Ye;var he=class{constructor(n,t){this.schema=n,this.decode=t}Encode(n){let t=P.Type(this.schema);return f.TTransform(t)?(()=>{let s={Encode:a=>t[l.Transform].Encode(n(a)),Decode:a=>this.decode(t[l.Transform].Decode(a))};return{...t,[l.Transform]:s}})():(()=>{let r={Decode:this.decode,Encode:n};return{...t,[l.Transform]:r}})()}};l.TransformEncodeBuilder=he;var Mt=0,Ge=class extends W{};l.TypeBuilderError=Ge;var en=class{Create(n){return n}Throw(n){throw new Ge(n)}Discard(n,t){return t.reduce((r,c)=>{let{[c]:s,...a}=r;return a},n)}Strict(n){return JSON.parse(JSON.stringify(n))}};l.TypeBuilder=en;var Le=class extends en{ReadonlyOptional(n){return this.Readonly(this.Optional(n))}Readonly(n){return{...P.Type(n),[l.Readonly]:"Readonly"}}Optional(n){return{...P.Type(n),[l.Optional]:"Optional"}}Any(n={}){return this.Create({...n,[l.Kind]:"Any"})}Array(n,t={}){return this.Create({...t,[l.Kind]:"Array",type:"array",items:P.Type(n)})}Boolean(n={}){return this.Create({...n,[l.Kind]:"Boolean",type:"boolean"})}Capitalize(n,t={}){return{...pe.Map(P.Type(n),"Capitalize"),...t}}Composite(n,t){let r=l.Type.Intersect(n,{}),s=Je.ResolveKeys(r,{includePatterns:!1}).reduce((a,p)=>({...a,[p]:l.Type.Index(r,[p])}),{});return l.Type.Object(s,t)}Enum(n,t={}){let r=Object.getOwnPropertyNames(n).filter(a=>isNaN(a)).map(a=>n[a]),s=[...new Set(r)].map(a=>l.Type.Literal(a));return this.Union(s,{...t,[l.Hint]:"Enum"})}Extends(n,t,r,c,s={}){switch(ie.Extends(n,t)){case d.Union:return this.Union([P.Type(r,s),P.Type(c,s)]);case d.True:return P.Type(r,s);case d.False:return P.Type(c,s)}}Exclude(n,t,r={}){return f.TTemplateLiteral(n)?this.Exclude(Z.Resolve(n),t,r):f.TTemplateLiteral(t)?this.Exclude(n,Z.Resolve(t),r):f.TUnion(n)?(()=>{let c=n.anyOf.filter(s=>ie.Extends(s,t)===d.False);return c.length===1?P.Type(c[0],r):this.Union(c,r)})():ie.Extends(n,t)!==d.False?this.Never(r):P.Type(n,r)}Extract(n,t,r={}){return f.TTemplateLiteral(n)?this.Extract(Z.Resolve(n),t,r):f.TTemplateLiteral(t)?this.Extract(n,Z.Resolve(t),r):f.TUnion(n)?(()=>{let c=n.anyOf.filter(s=>ie.Extends(s,t)!==d.False);return c.length===1?P.Type(c[0],r):this.Union(c,r)})():ie.Extends(n,t)!==d.False?P.Type(n,r):this.Never(r)}Index(n,t,r={}){return f.TArray(n)&&f.TNumber(t)?(()=>P.Type(n.items,r))():f.TTuple(n)&&f.TNumber(t)?(()=>{let s=(O.IsUndefined(n.items)?[]:n.items).map(a=>P.Type(a));return this.Union(s,r)})():(()=>{let c=Se.Resolve(t),s=P.Type(n);return Rn.Resolve(s,c,r)})()}Integer(n={}){return this.Create({...n,[l.Kind]:"Integer",type:"integer"})}Intersect(n,t={}){if(n.length===0)return l.Type.Never();if(n.length===1)return P.Type(n[0],t);n.some(a=>f.TTransform(a))&&this.Throw("Cannot intersect transform types");let r=n.every(a=>f.TObject(a)),c=P.Rest(n),s=f.TSchema(t.unevaluatedProperties)?{unevaluatedProperties:P.Type(t.unevaluatedProperties)}:{};return t.unevaluatedProperties===!1||f.TSchema(t.unevaluatedProperties)||r?this.Create({...t,...s,[l.Kind]:"Intersect",type:"object",allOf:c}):this.Create({...t,...s,[l.Kind]:"Intersect",allOf:c})}KeyOf(n,t={}){return f.TRecord(n)?(()=>{let r=Object.getOwnPropertyNames(n.patternProperties)[0];return r===l.PatternNumberExact?this.Number(t):r===l.PatternStringExact?this.String(t):this.Throw("Unable to resolve key type from Record key pattern")})():f.TTuple(n)?(()=>{let c=(O.IsUndefined(n.items)?[]:n.items).map((s,a)=>l.Type.Literal(a.toString()));return this.Union(c,t)})():f.TArray(n)?(()=>this.Number(t))():(()=>{let r=Je.ResolveKeys(n,{includePatterns:!1});if(r.length===0)return this.Never(t);let c=r.map(s=>this.Literal(s));return this.Union(c,t)})()}Literal(n,t={}){return this.Create({...t,[l.Kind]:"Literal",const:n,type:typeof n})}Lowercase(n,t={}){return{...pe.Map(P.Type(n),"Lowercase"),...t}}Never(n={}){return this.Create({...n,[l.Kind]:"Never",not:{}})}Not(n,t){return this.Create({...t,[l.Kind]:"Not",not:P.Type(n)})}Null(n={}){return this.Create({...n,[l.Kind]:"Null",type:"null"})}Number(n={}){return this.Create({...n,[l.Kind]:"Number",type:"number"})}Object(n,t={}){let r=Object.getOwnPropertyNames(n),c=r.filter(g=>f.TOptional(n[g])),s=r.filter(g=>!c.includes(g)),a=f.TSchema(t.additionalProperties)?{additionalProperties:P.Type(t.additionalProperties)}:{},p=r.reduce((g,y)=>({...g,[y]:P.Type(n[y])}),{});return s.length>0?this.Create({...t,...a,[l.Kind]:"Object",type:"object",properties:p,required:s}):this.Create({...t,...a,[l.Kind]:"Object",type:"object",properties:p})}Omit(n,t,r={}){let c=Se.Resolve(t);return de.Map(this.Discard(P.Type(n),["$id",l.Transform]),s=>{O.IsArray(s.required)&&(s.required=s.required.filter(a=>!c.includes(a)),s.required.length===0&&delete s.required);for(let a of Object.getOwnPropertyNames(s.properties))c.includes(a)&&delete s.properties[a];return this.Create(s)},r)}Partial(n,t={}){return de.Map(this.Discard(P.Type(n),["$id",l.Transform]),r=>{let c=Object.getOwnPropertyNames(r.properties).reduce((s,a)=>({...s,[a]:this.Optional(r.properties[a])}),{});return this.Object(c,this.Discard(r,["required"]))},t)}Pick(n,t,r={}){let c=Se.Resolve(t);return de.Map(this.Discard(P.Type(n),["$id",l.Transform]),s=>{O.IsArray(s.required)&&(s.required=s.required.filter(a=>c.includes(a)),s.required.length===0&&delete s.required);for(let a of Object.getOwnPropertyNames(s.properties))c.includes(a)||delete s.properties[a];return this.Create(s)},r)}Record(n,t,r={}){return f.TTemplateLiteral(n)?(()=>{let c=Te.ParseExact(n.pattern);return ye.Check(c)?this.Object([...ge.Generate(c)].reduce((s,a)=>({...s,[a]:P.Type(t)}),{}),r):this.Create({...r,[l.Kind]:"Record",type:"object",patternProperties:{[n.pattern]:P.Type(t)}})})():f.TUnion(n)?(()=>{let c=jn.Resolve(n);if(f.TUnionLiteral(c)){let s=c.anyOf.reduce((a,p)=>({...a,[p.const]:P.Type(t)}),{});return this.Object(s,{...r,[l.Hint]:"Record"})}else this.Throw("Record key of type union contains non-literal types")})():f.TLiteral(n)?(()=>O.IsString(n.const)||O.IsNumber(n.const)?this.Object({[n.const]:P.Type(t)},r):this.Throw("Record key of type literal is not of type string or number"))():f.TInteger(n)||f.TNumber(n)?(()=>this.Create({...r,[l.Kind]:"Record",type:"object",patternProperties:{[l.PatternNumberExact]:P.Type(t)}}))():f.TString(n)?(()=>{let c=O.IsUndefined(n.pattern)?l.PatternStringExact:n.pattern;return this.Create({...r,[l.Kind]:"Record",type:"object",patternProperties:{[c]:P.Type(t)}})})():this.Never()}Recursive(n,t={}){O.IsUndefined(t.$id)&&(t.$id=`T${Mt++}`);let r=n({[l.Kind]:"This",$ref:`${t.$id}`});return r.$id=t.$id,this.Create({...t,[l.Hint]:"Recursive",...r})}Ref(n,t={}){return O.IsString(n)?this.Create({...t,[l.Kind]:"Ref",$ref:n}):(O.IsUndefined(n.$id)&&this.Throw("Reference target type must specify an $id"),this.Create({...t,[l.Kind]:"Ref",$ref:n.$id}))}Required(n,t={}){return de.Map(this.Discard(P.Type(n),["$id",l.Transform]),r=>{let c=Object.getOwnPropertyNames(r.properties).reduce((s,a)=>({...s,[a]:this.Discard(r.properties[a],[l.Optional])}),{});return this.Object(c,r)},t)}Rest(n){return f.TTuple(n)&&!O.IsUndefined(n.items)?P.Rest(n.items):f.TIntersect(n)?P.Rest(n.allOf):f.TUnion(n)?P.Rest(n.anyOf):[]}String(n={}){return this.Create({...n,[l.Kind]:"String",type:"string"})}TemplateLiteral(n,t={}){let r=O.IsString(n)?Qe.Create(Nn.Parse(n)):Qe.Create(n);return this.Create({...t,[l.Kind]:"TemplateLiteral",type:"string",pattern:r})}Transform(n){return new Ye(n)}Tuple(n,t={}){let[r,c,s]=[!1,n.length,n.length],a=P.Rest(n),p=n.length>0?{...t,[l.Kind]:"Tuple",type:"array",items:a,additionalItems:r,minItems:c,maxItems:s}:{...t,[l.Kind]:"Tuple",type:"array",minItems:c,maxItems:s};return this.Create(p)}Uncapitalize(n,t={}){return{...pe.Map(P.Type(n),"Uncapitalize"),...t}}Union(n,t={}){return f.TTemplateLiteral(n)?Z.Resolve(n):(()=>{let r=n;if(r.length===0)return this.Never(t);if(r.length===1)return this.Create(P.Type(r[0],t));let c=P.Rest(r);return this.Create({...t,[l.Kind]:"Union",anyOf:c})})()}Unknown(n={}){return this.Create({...n,[l.Kind]:"Unknown"})}Unsafe(n={}){return this.Create({...n,[l.Kind]:n[l.Kind]||"Unsafe"})}Uppercase(n,t={}){return{...pe.Map(P.Type(n),"Uppercase"),...t}}};l.JsonTypeBuilder=Le;var nn=class extends Le{AsyncIterator(n,t={}){return this.Create({...t,[l.Kind]:"AsyncIterator",type:"AsyncIterator",items:P.Type(n)})}Awaited(n,t={}){let r=c=>c.length>0?(()=>{let[s,...a]=c;return[this.Awaited(s),...r(a)]})():c;return f.TIntersect(n)?l.Type.Intersect(r(n.allOf)):f.TUnion(n)?l.Type.Union(r(n.anyOf)):f.TPromise(n)?this.Awaited(n.item):P.Type(n,t)}BigInt(n={}){return this.Create({...n,[l.Kind]:"BigInt",type:"bigint"})}ConstructorParameters(n,t={}){return this.Tuple([...n.parameters],{...t})}Constructor(n,t,r){let[c,s]=[P.Rest(n),P.Type(t)];return this.Create({...r,[l.Kind]:"Constructor",type:"Constructor",parameters:c,returns:s})}Date(n={}){return this.Create({...n,[l.Kind]:"Date",type:"Date"})}Function(n,t,r){let[c,s]=[P.Rest(n),P.Type(t)];return this.Create({...r,[l.Kind]:"Function",type:"Function",parameters:c,returns:s})}InstanceType(n,t={}){return P.Type(n.returns,t)}Iterator(n,t={}){return this.Create({...t,[l.Kind]:"Iterator",type:"Iterator",items:P.Type(n)})}Parameters(n,t={}){return this.Tuple(n.parameters,{...t})}Promise(n,t={}){return this.Create({...t,[l.Kind]:"Promise",type:"Promise",item:P.Type(n)})}RegExp(n,t={}){let r=O.IsString(n)?n:n.source;return this.Create({...t,[l.Kind]:"String",type:"string",pattern:r})}RegEx(n,t={}){return this.RegExp(n,t)}ReturnType(n,t={}){return P.Type(n.returns,t)}Symbol(n){return this.Create({...n,[l.Kind]:"Symbol",type:"symbol"})}Undefined(n={}){return this.Create({...n,[l.Kind]:"Undefined",type:"undefined"})}Uint8Array(n={}){return this.Create({...n,[l.Kind]:"Uint8Array",type:"Uint8Array"})}Void(n={}){return this.Create({...n,[l.Kind]:"Void",type:"void"})}};l.JavaScriptTypeBuilder=nn;l.JsonType=new Le;l.Type=new nn});var ct=En((Hr,at)=>{"use strict";function b(e){if(!(this instanceof b))return new b(e);this._=e}var E=b.prototype;function Zn(e,n){var t=0;for(t;t<e;t++)n(t)}function _t(e,n){Zn(n.length,function(t){e(n[t],t,n)})}function ue(e,n,t){return _t(function(r,c,s){n=e(n,r,c,s)},t),n}function G(e,n){return ue(function(t,r,c,s){return t.concat([e(r,c,s)])},[],n)}function qt(e){var n=ue(function(t,r,c,s){return t.concat(c===s.length-1?Buffer.from([r,0]).readUInt16BE(0):s.readUInt16BE(c))},[],e);return Buffer.from(G(function(t){return(t<<1&65535)>>8},n))}function Vt(e,n){var t={v:0,buf:n};return Zn(e,function(){t={v:t.v<<1|zt(t.buf),buf:qt(t.buf)}}),t}function zt(e){return e[0]>>7}function Jt(e){return ue(function(n,t){return n+t},0,e)}function Wt(e,n){return ue(function(t,r){return t||(e(r)?r:t)},null,n)}function Xn(){return typeof Buffer<"u"}function Ht(){if(b._supportsSet!==void 0)return b._supportsSet;var e=typeof Set<"u";return b._supportsSet=e,e}function fn(){if(!Xn())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function Yn(e){fn();var n=Jt(e);if(n%8!==0)throw new Error("The bits ["+e.join(", ")+"] add up to "+n+" which is not an even number of bytes; the total should be divisible by 8");var t=n/8,r=Wt(function(c){return c>48},e);if(r)throw new Error(r+" bit range requested exceeds 48 bit (6 byte) Number max.");return new b(function(c,s){var a=t+s;return a>c.length?_(s,t.toString()+" bytes"):B(a,ue(function(p,g){var y=Vt(g,p.buf);return{coll:p.coll.concat(y.v),buf:y.buf}},{coll:[],buf:c.slice(s,a)},e).coll)})}function Qt(e){fn();var n={},t=0,r=G(function(a){if(be(a)){var p=a;if(p.length!==2)throw new Error("["+p.join(", ")+"] should be length 2, got length "+p.length);if(je(p[0]),Ie(p[1]),Object.prototype.hasOwnProperty.call(n,p[0]))throw new Error("duplicate key in bitSeqObj: "+p[0]);return n[p[0]]=!0,t++,p}else return Ie(a),[null,a]},e);if(t<1)throw new Error("bitSeqObj expects at least one named pair, got ["+e.join(", ")+"]");var c=G(function(a){return a[0]},r),s=G(function(a){return a[1]},r);return Yn(s).map(function(a){var p=G(function(g,y){return[g,a[y]]},c);return ue(function(g,y){return y[0]!==null&&(g[y[0]]=y[1]),g},{},p)})}function H(e,n){return new b(function(t,r){return fn(),r+n>t.length?_(r,n+" bytes for "+e):B(r+n,t.slice(r,r+n))})}function Zt(e){return H("buffer",e).map(function(n){return Buffer.from(n)})}function Xt(e,n){return H("string",n).map(function(t){return t.toString(e)})}function Yt(e){return typeof e=="number"&&Math.floor(e)===e}function pn(e,n){if(!Yt(n)||n<0||n>6)throw new Error(e+" requires integer length in range [0, 6].")}function tn(e){return pn("uintBE",e),H("uintBE("+e+")",e).map(function(n){return n.readUIntBE(0,e)})}function rn(e){return pn("uintLE",e),H("uintLE("+e+")",e).map(function(n){return n.readUIntLE(0,e)})}function on(e){return pn("intBE",e),H("intBE("+e+")",e).map(function(n){return n.readIntBE(0,e)})}function un(e){return pn("intLE",e),H("intLE("+e+")",e).map(function(n){return n.readIntLE(0,e)})}function ht(){return H("floatBE",4).map(function(e){return e.readFloatBE(0)})}function Gt(){return H("floatLE",4).map(function(e){return e.readFloatLE(0)})}function er(){return H("doubleBE",8).map(function(e){return e.readDoubleBE(0)})}function nr(){return H("doubleLE",8).map(function(e){return e.readDoubleLE(0)})}function tr(e){return Array.prototype.slice.call(e)}function Ne(e){return e instanceof b}function be(e){return{}.toString.call(e)==="[object Array]"}function Re(e){return Xn()&&Buffer.isBuffer(e)}function B(e,n){return{status:!0,index:e,value:n,furthest:-1,expected:[]}}function _(e,n){return be(n)||(n=[n]),{status:!1,index:-1,value:null,furthest:e,expected:n}}function z(e,n){if(!n||e.furthest>n.furthest)return e;var t=e.furthest===n.furthest?rr(e.expected,n.expected):n.expected;return{status:e.status,index:e.index,value:e.value,furthest:n.furthest,expected:t}}var an={};function hn(e,n){if(Re(e))return{offset:n,line:-1,column:-1};e in an||(an[e]={});for(var t=an[e],r=0,c=0,s=0,a=n;a>=0;){if(a in t){r=t[a].line,s===0&&(s=t[a].lineStart);break}(e.charAt(a)===`
`||e.charAt(a)==="\r"&&e.charAt(a+1)!==`
`)&&(c++,s===0&&(s=a+1)),a--}var p=r+c,g=n-s;return t[n]={line:p,lineStart:s},{offset:n,line:p+1,column:g+1}}function rr(e,n){if(Ht()&&Array.from){for(var t=new Set(e),r=0;r<n.length;r++)t.add(n[r]);var c=Array.from(t);return c.sort(),c}for(var s={},a=0;a<e.length;a++)s[e[a]]=!0;for(var p=0;p<n.length;p++)s[n[p]]=!0;var g=[];for(var y in s)({}).hasOwnProperty.call(s,y)&&g.push(y);return g.sort(),g}function me(e){if(!Ne(e))throw new Error("not a parser: "+e)}function dn(e,n){return typeof e=="string"?e.charAt(n):e[n]}function ir(e){if(!be(e))throw new Error("not an array: "+e)}function Ie(e){if(typeof e!="number")throw new Error("not a number: "+e)}function or(e){if(!(e instanceof RegExp))throw new Error("not a regexp: "+e);for(var n=et(e),t=0;t<n.length;t++){var r=n.charAt(t);if(r!=="i"&&r!=="m"&&r!=="u"&&r!=="s")throw new Error('unsupported regexp flag "'+r+'": '+e)}}function oe(e){if(typeof e!="function")throw new Error("not a function: "+e)}function je(e){if(typeof e!="string")throw new Error("not a string: "+e)}var ur=2,sr=3,ee=8,ar=ee*5,cr=ee*4,Hn="  ";function cn(e,n){return new Array(n+1).join(e)}function lr(e){return e.length===1?`Expected:

`+e[0]:`Expected one of the following: 

`+e.join(", ")}function sn(e,n,t){var r=n-e.length;return r<=0?e:cn(t,r)+e}function fr(e,n){var t=e.length,r=[],c=0;if(t<=n)return[e.slice()];for(var s=0;s<t;s++)r[c]||r.push([]),r[c].push(e[s]),(s+1)%n===0&&c++;return r}function Qn(e,n,t,r){return{from:e-n>0?e-n:0,to:e+t>r?r:e+t}}function pr(e){return e.from===0&&e.to===1?{from:e.from,to:e.to}:{from:e.from/ee,to:Math.floor(e.to/ee)}}function dr(e,n){var t=n.index,r=t.offset,c=1,s,a,p,g,y;if(r===e.length)return"Got the end of the input";if(Re(e)){var v=r-r%ee,m=r-v,w=Qn(v,ar,cr+ee,e.length),T=e.slice(w.from,w.to),I=fr(T.toJSON().data,ee),x=G(function(j){return G(function(C){return sn(C.toString(16),2,"0")},j)},I);g=pr(w),a=v/ee,s=m*3,m>=4&&(s+=1),c=2,p=G(function(j){return j.length<=4?j.join(" "):j.slice(0,4).join(" ")+"  "+j.slice(4).join(" ")},x),y=((g.to>0?g.to-1:g.to)*8).toString(16).length,y<2&&(y=2)}else{var S=e.split(/\r\n|[\n\r\u2028\u2029]/);s=t.column-1,a=t.line-1,g=Qn(a,ur,sr,S.length),p=S.slice(g.from,g.to),y=g.to.toString().length}var R=a-g.from;Re(e)&&(y=((g.to>0?g.to-1:g.to)*8).toString(16).length,y<2&&(y=2));var L=ue(function(j,C,Y){var U=Y===R,ne=U?"> ":Hn,Q;return Re(e)?Q=sn(((g.from+Y)*8).toString(16),y,"0"):Q=sn((g.from+Y+1).toString(),y," "),[].concat(j,[ne+Q+" | "+C],U?[Hn+cn(" ",y)+" | "+sn("",s," ")+cn("^",c)]:[])},[],p);return L.join(`
`)}function Gn(e,n){return[`
`,"-- PARSING FAILED "+cn("-",50),`

`,dr(e,n),`

`,lr(n.expected),`
`].join("")}function et(e){return e.flags!==void 0?e.flags:[e.global?"g":"",e.ignoreCase?"i":"",e.multiline?"m":"",e.unicode?"u":"",e.sticky?"y":""].join("")}function Tr(e){return RegExp("^(?:"+e.source+")",et(e))}function Tn(){for(var e=[].slice.call(arguments),n=e.length,t=0;t<n;t+=1)me(e[t]);return b(function(r,c){for(var s,a=new Array(n),p=0;p<n;p+=1){if(s=z(e[p]._(r,c),s),!s.status)return s;a[p]=s.value,c=s.index}return z(B(c,a),s)})}function yr(){for(var e={},n=0,t=tr(arguments),r=t.length,c=0;c<r;c+=1){var s=t[c];if(!Ne(s)){if(be(s)){var a=s.length===2&&typeof s[0]=="string"&&Ne(s[1]);if(a){var p=s[0];if(Object.prototype.hasOwnProperty.call(e,p))throw new Error("seqObj: duplicate key "+p);e[p]=!0,n++;continue}}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(n===0)throw new Error("seqObj expects at least one named parser, found zero");return b(function(g,y){for(var v,m={},w=0;w<r;w+=1){var T,I;if(be(t[w])?(T=t[w][0],I=t[w][1]):(T=null,I=t[w]),v=z(I._(g,y),v),!v.status)return v;T&&(m[T]=v.value),y=v.index}return z(B(y,m),v)})}function se(){var e=[].slice.call(arguments);if(e.length===0)throw new Error("seqMap needs at least one argument");var n=e.pop();return oe(n),Tn.apply(null,e).map(function(t){return n.apply(null,t)})}function gr(e){var n={};for(var t in e)({}).hasOwnProperty.call(e,t)&&function(r){var c=function(){return e[r](n)};n[r]=rt(c)}(t);return n}function yn(){var e=[].slice.call(arguments),n=e.length;if(n===0)return gn("zero alternates");for(var t=0;t<n;t+=1)me(e[t]);return b(function(r,c){for(var s,a=0;a<e.length;a+=1)if(s=z(e[a]._(r,c),s),s.status)return s;return s})}function nt(e,n){return An(e,n).or(ae([]))}function An(e,n){me(e),me(n);var t=n.then(e).many();return se(e,t,function(r,c){return[r].concat(c)})}E.parse=function(e){if(typeof e!="string"&&!Re(e))throw new Error(".parse must be called with a string or Buffer as its argument");var n=this.skip(Bn)._(e,0),t;return n.status?t={status:!0,value:n.value}:t={status:!1,index:hn(e,n.furthest),expected:n.expected},delete an[e],t};E.tryParse=function(e){var n=this.parse(e);if(n.status)return n.value;var t=Gn(e,n),r=new Error(t);throw r.type="ParsimmonError",r.result=n,r};E.assert=function(e,n){return this.chain(function(t){return e(t)?ae(t):gn(n)})};E.or=function(e){return yn(this,e)};E.trim=function(e){return this.wrap(e,e)};E.wrap=function(e,n){return se(e,this,n,function(t,r){return r})};E.thru=function(e){return e(this)};E.then=function(e){return me(e),Tn(this,e).map(function(n){return n[1]})};E.many=function(){var e=this;return b(function(n,t){for(var r=[],c=void 0;;)if(c=z(e._(n,t),c),c.status){if(t===c.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");t=c.index,r.push(c.value)}else return z(B(t,r),c)})};E.tieWith=function(e){return je(e),this.map(function(n){if(ir(n),n.length){je(n[0]);for(var t=n[0],r=1;r<n.length;r++)je(n[r]),t+=e+n[r];return t}else return""})};E.tie=function(){return this.tieWith("")};E.times=function(e,n){var t=this;return arguments.length<2&&(n=e),Ie(e),Ie(n),b(function(r,c){for(var s=[],a=void 0,p=void 0,g=0;g<e;g+=1)if(a=t._(r,c),p=z(a,p),a.status)c=a.index,s.push(a.value);else return p;for(;g<n&&(a=t._(r,c),p=z(a,p),a.status);g+=1)c=a.index,s.push(a.value);return z(B(c,s),p)})};E.result=function(e){return this.map(function(){return e})};E.atMost=function(e){return this.times(0,e)};E.atLeast=function(e){return se(this.times(e),this.many(),function(n,t){return n.concat(t)})};E.map=function(e){oe(e);var n=this;return b(function(t,r){var c=n._(t,r);return c.status?z(B(c.index,e(c.value)),c):c})};E.contramap=function(e){oe(e);var n=this;return b(function(t,r){var c=n.parse(e(t.slice(r)));return c.status?B(r+t.length,c.value):c})};E.promap=function(e,n){return oe(e),oe(n),this.contramap(e).map(n)};E.skip=function(e){return Tn(this,e).map(function(n){return n[0]})};E.mark=function(){return se(Ae,this,Ae,function(e,n,t){return{start:e,value:n,end:t}})};E.node=function(e){return se(Ae,this,Ae,function(n,t,r){return{name:e,value:t,start:n,end:r}})};E.sepBy=function(e){return nt(this,e)};E.sepBy1=function(e){return An(this,e)};E.lookahead=function(e){return this.skip(ln(e))};E.notFollowedBy=function(e){return this.skip(tt(e))};E.desc=function(e){be(e)||(e=[e]);var n=this;return b(function(t,r){var c=n._(t,r);return c.status||(c.expected=e),c})};E.fallback=function(e){return this.or(ae(e))};E.ap=function(e){return se(e,this,function(n,t){return n(t)})};E.chain=function(e){var n=this;return b(function(t,r){var c=n._(t,r);if(!c.status)return c;var s=e(c.value);return z(s._(t,c.index),c)})};function Fe(e){je(e);var n="'"+e+"'";return b(function(t,r){var c=r+e.length,s=t.slice(r,c);return s===e?B(c,s):_(r,n)})}function vr(e){if(fn(),Ie(e),e>255)throw new Error("Value specified to byte constructor ("+e+"=0x"+e.toString(16)+") is larger in value than a single byte.");var n=(e>15?"0x":"0x0")+e.toString(16);return b(function(t,r){var c=dn(t,r);return c===e?B(r+1,c):_(r,n)})}function X(e,n){or(e),arguments.length>=2?Ie(n):n=0;var t=Tr(e),r=""+e;return b(function(c,s){var a=t.exec(c.slice(s));if(a){if(0<=n&&n<=a.length){var p=a[0],g=a[n];return B(s+p.length,g)}var y="valid match group (0 to "+a.length+") in "+r;return _(s,y)}return _(s,r)})}function ae(e){return b(function(n,t){return B(t,e)})}function gn(e){return b(function(n,t){return _(t,e)})}function ln(e){if(Ne(e))return b(function(n,t){var r=e._(n,t);return r.index=t,r.value="",r});if(typeof e=="string")return ln(Fe(e));if(e instanceof RegExp)return ln(X(e));throw new Error("not a string, regexp, or parser: "+e)}function tt(e){return me(e),b(function(n,t){var r=e._(n,t),c=n.slice(t,r.index);return r.status?_(t,'not "'+c+'"'):B(t,null)})}function vn(e){return oe(e),b(function(n,t){var r=dn(n,t);return t<n.length&&e(r)?B(t+1,r):_(t,"a character/byte matching "+e)})}function br(e){for(var n=e.split(""),t=0;t<n.length;t++)n[t]="'"+n[t]+"'";return vn(function(r){return e.indexOf(r)>=0}).desc(n)}function mr(e){return vn(function(n){return e.indexOf(n)<0}).desc("none of '"+e+"'")}function Ir(e){return b(e(B,_))}function Or(e,n){return vn(function(t){return e<=t&&t<=n}).desc(e+"-"+n)}function wr(e){return oe(e),b(function(n,t){for(var r=t;r<n.length&&e(dn(n,r));)r++;return B(r,n.slice(t,r))})}function rt(e,n){arguments.length<2&&(n=e,e=void 0);var t=b(function(r,c){return t._=n()._,t._(r,c)});return e?t.desc(e):t}function Fn(){return gn("fantasy-land/empty")}E.concat=E.or;E.empty=Fn;E.of=ae;E["fantasy-land/ap"]=E.ap;E["fantasy-land/chain"]=E.chain;E["fantasy-land/concat"]=E.concat;E["fantasy-land/empty"]=E.empty;E["fantasy-land/of"]=E.of;E["fantasy-land/map"]=E.map;var Ae=b(function(e,n){return B(n,hn(e,n))}),Pr=b(function(e,n){return n>=e.length?_(n,"any character/byte"):B(n+1,dn(e,n))}),xr=b(function(e,n){return B(e.length,e.slice(n))}),Bn=b(function(e,n){return n<e.length?_(n,"EOF"):B(n,null)}),Er=X(/[0-9]/).desc("a digit"),Sr=X(/[0-9]*/).desc("optional digits"),Ur=X(/[a-z]/i).desc("a letter"),Lr=X(/[a-z]*/i).desc("optional letters"),Rr=X(/\s*/).desc("optional whitespace"),jr=X(/\s+/).desc("whitespace"),it=Fe("\r"),ot=Fe(`
`),ut=Fe(`\r
`),st=yn(ut,ot,it).desc("newline"),Nr=yn(st,Bn);b.all=xr;b.alt=yn;b.any=Pr;b.cr=it;b.createLanguage=gr;b.crlf=ut;b.custom=Ir;b.digit=Er;b.digits=Sr;b.empty=Fn;b.end=Nr;b.eof=Bn;b.fail=gn;b.formatError=Gn;b.index=Ae;b.isParser=Ne;b.lazy=rt;b.letter=Ur;b.letters=Lr;b.lf=ot;b.lookahead=ln;b.makeFailure=_;b.makeSuccess=B;b.newline=st;b.noneOf=mr;b.notFollowedBy=tt;b.of=ae;b.oneOf=br;b.optWhitespace=Rr;b.Parser=b;b.range=Or;b.regex=X;b.regexp=X;b.sepBy=nt;b.sepBy1=An;b.seq=Tn;b.seqMap=se;b.seqObj=yr;b.string=Fe;b.succeed=ae;b.takeWhile=wr;b.test=vn;b.whitespace=jr;b["fantasy-land/empty"]=Fn;b["fantasy-land/of"]=ae;b.Binary={bitSeq:Yn,bitSeqObj:Qt,byte:vr,buffer:Zt,encodedString:Xt,uintBE:tn,uint8BE:tn(1),uint16BE:tn(2),uint32BE:tn(4),uintLE:rn,uint8LE:rn(1),uint16LE:rn(2),uint32LE:rn(4),intBE:on,int8BE:on(1),int16BE:on(2),int32BE:on(4),intLE:un,int8LE:un(1),int16LE:un(2),int32LE:un(4),floatBE:ht(),floatLE:Gt(),doubleBE:er(),doubleLE:nr()};at.exports=b});var gt=En((Yr,yt)=>{yt.exports=Be;Be.flatten=Be;Be.unflatten=Tt;function pt(e){return e&&e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function dt(e){return e}function Be(e,n){n=n||{};let t=n.delimiter||".",r=n.maxDepth,c=n.transformKey||dt,s={};function a(p,g,y){y=y||1,Object.keys(p).forEach(function(v){let m=p[v],w=n.safe&&Array.isArray(m),T=Object.prototype.toString.call(m),I=pt(m),x=T==="[object Object]"||T==="[object Array]",S=g?g+t+c(v):c(v);if(!w&&!I&&x&&Object.keys(m).length&&(!n.maxDepth||y<r))return a(m,S,y+1);s[S]=m})}return a(e),s}function Tt(e,n){n=n||{};let t=n.delimiter||".",r=n.overwrite||!1,c=n.transformKey||dt,s={};if(pt(e)||Object.prototype.toString.call(e)!=="[object Object]")return e;function p(v){let m=Number(v);return isNaN(m)||v.indexOf(".")!==-1||n.object?v:m}function g(v,m,w){return Object.keys(w).reduce(function(T,I){return T[v+t+I]=w[I],T},m)}function y(v){let m=Object.prototype.toString.call(v),w=m==="[object Array]",T=m==="[object Object]";if(v){if(w)return!v.length;if(T)return!Object.keys(v).length}else return!0}return e=Object.keys(e).reduce(function(v,m){let w=Object.prototype.toString.call(e[m]);return!(w==="[object Object]"||w==="[object Array]")||y(e[m])?(v[m]=e[m],v):g(m,v,Be(e[m],n))},{}),Object.keys(e).forEach(function(v){let m=v.split(t).map(c),w=p(m.shift()),T=p(m[0]),I=s;for(;T!==void 0;){if(w==="__proto__")return;let x=Object.prototype.toString.call(I[w]),S=x==="[object Object]"||x==="[object Array]";if(!r&&!S&&typeof I[w]<"u")return;(r&&!S||!r&&I[w]==null)&&(I[w]=typeof T=="number"&&!n.object?[]:{}),I=I[w],m.length>0&&(w=p(m.shift()),T=p(m[0]))}I[w]=Tt(e[v],n)}),s}});var Dn={en:"JSON translation files"},_n={en:"This plugin enables using JSON files for messages. It is not library specific and can be used with any framework."};var V=Sn(zn(),1),Jn=V.Type.String({pattern:"^(\\./|\\../|/)[^*]*\\{languageTag\\}[^*]*\\.json",description:"The pathPattern must contain `{languageTag}` and end with `.json`.",examples:["./{languageTag}/file.json","../folder/{languageTag}/file.json","./{languageTag}.json"]}),Wn=V.Type.Object({pathPattern:V.Type.Union([Jn,V.Type.Record(V.Type.String({pattern:"^[^.]+$",description:"Dots are not allowd ",examples:["website","app","homepage"]}),Jn)]),variableReferencePattern:V.Type.Optional(V.Type.Array(V.Type.String())),ignore:V.Type.Optional(V.Type.Array(V.Type.String()))});function ve(e,n,t){return e.replace(new RegExp(Dt(n),"g"),t)}function Dt(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var k=Sn(ct(),1),Ar=k.default.createLanguage({entry:e=>k.default.alt(e.FunctionCall,k.default.any).many().map(n=>n.filter(t=>typeof t=="object")),stringLiteral:e=>k.default.alt(e.doubleQuotedString,e.singleQuotedString),doubleQuotedString:()=>k.default.string('"').then(k.default.regex(/[^"]*/)).skip(k.default.string('"')),singleQuotedString:()=>k.default.string("'").then(k.default.regex(/[^']*/)).skip(k.default.string("'")),FunctionCall:function(e){return k.default.seqMap(k.default.regex(/[^a-zA-Z0-9]/),k.default.string("t"),k.default.string("("),k.default.index,e.stringLiteral,k.default.index,k.default.regex(/[^)]*/),k.default.string(")"),(n,t,r,c,s,a)=>({messageId:s,position:{start:{line:c.line,character:c.column},end:{line:a.line,character:a.column}}}))}});function lt(e){try{return Ar.entry.tryParse(e)}catch{return[]}}var ft=()=>({"app.inlang.ideExtension":{messageReferenceMatchers:[async e=>lt(e.documentText)],extractMessageOptions:[{callback:e=>`{t("${e.messageId}")}`}],documentSelectors:[{language:"typescriptreact"},{language:"javascript"},{language:"typescript"},{language:"svelte"}]}});var bn=Sn(gt(),1);var Fr=e=>{let n=vt(e,0);if(n===void 0||!Cr(e[n]))return;let t=vt(e,n+1);if(t!==void 0)return $r(e,n,t)},bt=Fr,vt=(e,n)=>{for(let t=n;t<e.length;t+=1){let r=e[t];if(!Br(r))return t}},Br=e=>e===" "||e==="	"||e===`
`||e==="\r",Cr=e=>e==="{"||e==="[",$r=(e,n,t)=>{let r;for(let c=t-1;c>n;c-=1){let s=e[c];if(s==="\r")return;if(s===`
`)return Kr(r);if(r===void 0)r=s;else if(r[0]===s)r+=s;else return}},Kr=e=>e===void 0?0:e[0]===" "?e.length:e;var Cn=e=>{let n=e.endsWith(`
`),t=bt(e);return(r,c)=>JSON.stringify(r,c,t)+(n?`
`:"")};var Pt,$n=!1,ce="plugin.inlang.json",xt={id:ce,displayName:Dn,description:_n,settingsSchema:Wn,loadMessages:async({settings:e,nodeishFs:n})=>(e[ce].variableReferencePattern=e[ce].variableReferencePattern||["{","}"],kr({nodeishFs:n,pluginSettings:e[ce],languageTags:e.languageTags,sourceLanguageTag:e.sourceLanguageTag})),saveMessages:async({messages:e,settings:n,nodeishFs:t})=>(n[ce].variableReferencePattern=n[ce].variableReferencePattern||["{","}"],Dr({nodeishFs:t,pluginSettings:n[ce],messages:e})),addCustomApi:()=>ft()};async function kr(e){let n=[];for(let t of Mr(e.languageTags,e.sourceLanguageTag))if(typeof e.pluginSettings.pathPattern!="string")for(let[r,c]of Object.entries(e.pluginSettings.pathPattern)){let s=await mt(c,t,e.sourceLanguageTag,e.nodeishFs);for(let[a,p]of Object.entries(s))if(Object.keys(p).length!==0){let g=r+":"+ve(a,"u002E",".");It(n,g,t,p,e.pluginSettings)}}else{let r=await mt(e.pluginSettings.pathPattern,t,e.sourceLanguageTag,e.nodeishFs);for(let[c,s]of Object.entries(r))Object.keys(s).length!==0&&It(n,ve(c,"u002E","."),t,s,e.pluginSettings)}return n}async function mt(e,n,t,r){let c=e.replace("{languageTag}",n);try{let s=await r.readFile(c,{encoding:"utf-8"});t===n&&(Pt=Cn(s));let a=JSON.parse(s);return Object.values(a).some(g=>typeof g=="object")&&($n=!0),$n?(0,bn.flatten)(a,{transformKey:function(g){return ve(g,".","u002E")}}):a}catch(s){if(s.code==="FileNotFound"||s.code==="ENOENT")return{};throw s}}var Mr=(e,n)=>{let t=e.filter(r=>r!==n);return t.unshift(n),t},It=(e,n,t,r,c)=>{let s=e.findIndex(a=>a.id===n);if(s!==-1){let a={languageTag:t,match:[],pattern:Ot(r,c.variableReferencePattern)};e[s]?.variants.push(a)}else{let a={id:n,selectors:[],variants:[]};a.variants=[{languageTag:t,match:[],pattern:Ot(r,c.variableReferencePattern)}],e.push(a)}};function Ot(e,n){let t=n[1]?new RegExp(`(\\${n[0]}[^\\${n[1]}]+\\${n[1]})`,"g"):new RegExp(`(${n}\\w+)`,"g");return e.split(t).filter(c=>c!=="").map(c=>t.test(c)&&n[0]?{type:"VariableReference",name:n[1]?c.slice(n[0].length,-n[1].length):c.slice(n[0].length)}:{type:"Text",value:c})}async function Dr(e){if(typeof e.pluginSettings.pathPattern=="object"){let n={};for(let t of e.messages)for(let r of t.variants){let c=t.id.includes(":")?t.id.split(":")[0]:Object.keys(e.pluginSettings.pathPattern)[0],s=t.id.replace(c+":","");n[r.languageTag]??={},n[r.languageTag][c]??={},n[r.languageTag][c][s]=r.pattern}for(let[t,r]of Object.entries(n)){for(let c of Object.values(e.pluginSettings.pathPattern)){let s=c.replace("{languageTag}",t).split("/").slice(0,-1).join("/");try{await e.nodeishFs.readdir(s)}catch{await e.nodeishFs.mkdir(s)}}for(let[c,s]of Object.entries(r)){let a=e.pluginSettings.pathPattern[c].replace("{languageTag}",t);await e.nodeishFs.writeFile(a,wt(s,e.pluginSettings.variableReferencePattern))}}}else{let n={};for(let t of e.messages)for(let r of t.variants)n[r.languageTag]??={},n[r.languageTag][t.id]=r.pattern;for(let[t,r]of Object.entries(n)){let c=e.pluginSettings.pathPattern.replace("{languageTag}",t);try{await e.nodeishFs.readdir(c.split("/").slice(0,-1).join("/"))}catch{await e.nodeishFs.mkdir(c.split("/").slice(0,-1).join("/"),{recursive:!0})}await e.nodeishFs.writeFile(c,wt(r,e.pluginSettings.variableReferencePattern))}}}function wt(e,n){let t={};for(let[r,c]of Object.entries(e)){let s=ve(r,"..","u002E.");s.slice(-1)==="."&&(s=s.replace(/.$/,"u002E")),t[s]=_r(c,n)}return $n&&(t=(0,bn.unflatten)(t,{object:!0})),ve(Pt(t),"u002E",".")}function _r(e,n){let t=[];for(let r of e)switch(r.type){case"Text":t.push(r.value);break;case"VariableReference":t.push(n[1]?`${n[0]}${r.name}${n[1]}`:`${n[0]}${r.name}`);break;default:throw new Error(`Unknown message pattern element of type: ${r?.type}`)}return t.join("")}var li=xt;export{li as default};
