@import 'tailwindcss';

@theme {
	/* ─────────────────────────────────────────────────────────────────────
     COLOR SYSTEM - OKLCH for perfect color consistency
     ───────────────────────────────────────────────────────────────────── */

	/* Core Neutrals - Instagram-inspired Professional Palette */
	--color-white: oklch(1 0 0);
	--color-gray-50: oklch(0.99 0 0); /* #FAFAFA - Background */
	--color-gray-100: oklch(0.97 0 0); /* #F5F5F5 - Surface */
	--color-gray-200: oklch(0.95 0 0); /* #EFEFEF - Borders */
	--color-gray-300: oklch(0.88 0 0); /* #DBDBDB - Dividers */
	--color-gray-500: oklch(0.6 0 0); /* #8E8E8E - Secondary text */
	--color-gray-900: oklch(0.2 0 0); /* #262626 - Primary text */

	/* Brand Colors - Instagram-inspired Social Commerce */
	--color-brand: oklch(0.62 0.24 230); /* #0095F6 - Instagram blue */
	--color-brand-dark: oklch(0.52 0.22 230); /* Hover state */
	--color-accent: oklch(0.723 0.219 149.579); /* Success green */
	--color-danger: oklch(0.64 0.25 20); /* #ED4956 - Heart red */
	--color-success: oklch(0.75 0.2 145); /* #00D87E - Online green */
	--color-warning: oklch(0.9 0.15 90); /* #FFDC80 - Promoted */
	
	/* Condition Badge Colors - Professional System */
	--color-condition-new: oklch(0.62 0.18 145); /* Emerald green */
	--color-condition-like-new: oklch(0.60 0.21 255); /* Vibrant blue */
	--color-condition-good: oklch(0.70 0.15 85); /* Amber */
	--color-condition-fair: oklch(0.65 0.20 45); /* Orange */
	
	/* Professional Ecommerce Accents */
	--color-premium: oklch(0.45 0.08 260); /* Dark navy for premium feel */
	--color-sale: oklch(0.60 0.25 15); /* Bright red for sales */
	--color-trending: oklch(0.68 0.18 300); /* Purple for trending */
	--color-verified: oklch(0.58 0.22 220); /* Trust blue */

	/* Semantic color mappings for Tailwind utilities */
	--color-background: oklch(0.99 0 0); /* Light gray background */
	--color-surface: oklch(1 0 0); /* White cards */
	--color-foreground: oklch(0.2 0 0); /* Dark text */
	--color-card: oklch(1 0 0);
	--color-card-foreground: oklch(0.13 0.028 261.692);
	--color-popover: oklch(1 0 0);
	--color-popover-foreground: oklch(0.13 0.028 261.692);
	--color-primary: oklch(0.715 0.143 215.221);
	--color-primary-foreground: oklch(1 0 0);
	--color-secondary: oklch(0.967 0.003 264.542);
	--color-secondary-foreground: oklch(0.278 0.033 256.848);
	--color-muted: oklch(0.967 0.003 264.542);
	--color-muted-foreground: oklch(0.446 0.03 256.802);
	
	/* Z-index scale */
	--z-base: 0;
	--z-behind: 1;
	--z-low: 10;
	--z-medium: 20;
	--z-medium-high: 25;
	--z-high: 50;
	--z-higher: 100;
	--z-highest: 200;
	
	/* Image Dimensions System - Single source of truth */
	--img-product-size: 400px;
	--img-story-size: 70px;
	--img-story-mobile: 64px;
	--img-avatar-sm: 24px;
	--img-avatar-md: 40px;
	--img-avatar-lg: 60px;
	--img-thumbnail: 150px;
	
	/* Layout Heights for CLS prevention */
	--header-height: 56px;
	--header-height-md: 60px;
	--search-bar-height: 48px;
	--bottom-nav-height: 56px;
	--stories-height: 130px;
	--stories-height-mobile: 120px;
	--color-accent: oklch(0.967 0.003 264.542);
	--color-accent-foreground: oklch(0.278 0.033 256.848);
	--color-destructive: oklch(0.637 0.237 25.331);
	--color-destructive-foreground: oklch(1 0 0);
	--color-border: oklch(0.872 0.01 258.338);
	--color-input: oklch(0.872 0.01 258.338);
	--color-ring: oklch(0.715 0.143 215.221);

	/* ─────────────────────────────────────────────────────────────────────
     TYPOGRAPHY - Cyrillic-first, mobile-optimized
     ───────────────────────────────────────────────────────────────────── */

	/* Font Stack - Inter loaded, system fallbacks */
	--font-sans: 'Inter', -apple-system, 'Segoe UI', 'Roboto', 'Ubuntu', sans-serif;
	--font-mono: 'SF Mono', 'Monaco', 'Consolas', monospace;

	/* Sizes - Only what we need */
	--text-xs: 0.75rem; /* 12px - metadata */
	--text-sm: 0.875rem; /* 14px - body */
	--text-base: 1rem; /* 16px - default */
	--text-lg: 1.25rem; /* 20px - headings */
	--text-xl: 1.5rem; /* 24px - page titles */
	--text-2xl: 1.875rem; /* 30px - hero */

	/* Weights - Reduced set */
	--font-normal: 400;
	--font-medium: 500;
	--font-semibold: 600;
	--font-bold: 700;

	/* Line Heights - Mobile-first */
	--leading-tight: 1.25;
	--leading-normal: 1.5;

	/* ─────────────────────────────────────────────────────────────────────
     SPACING - Strict 4px grid (every value divisible by 4)
     ───────────────────────────────────────────────────────────────────── */

	--spacing-0: 0;
	--spacing-1: 4px; /* 0.25rem */
	--spacing-2: 8px; /* 0.5rem */
	--spacing-3: 12px; /* 0.75rem */
	--spacing-4: 16px; /* 1rem */
	--spacing-5: 20px; /* 1.25rem */
	--spacing-6: 24px; /* 1.5rem */
	--spacing-8: 32px; /* 2rem */
	--spacing-10: 40px; /* 2.5rem */
	--spacing-12: 48px; /* 3rem */
	--spacing-16: 64px; /* 4rem */
	--spacing-20: 80px; /* 5rem */
	--spacing-24: 96px; /* 6rem */

	/* ─────────────────────────────────────────────────────────────────────
     ANIMATION - 0ms or 200ms, nothing between
     ───────────────────────────────────────────────────────────────────── */

	--duration-instant: 0ms;
	--duration-fast: 150ms;
	--duration-200: 200ms;

	/* Single easing for consistency */
	--ease-default: cubic-bezier(0.4, 0, 0.2, 1);

	/* ─────────────────────────────────────────────────────────────────────
     SHADOWS - Enhanced with color
     ───────────────────────────────────────────────────────────────────── */

	--shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
	--shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
	--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
	--shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
	--shadow-primary: 0 4px 14px 0 oklch(0.715 0.143 215.221 / 0.15);

	/* ─────────────────────────────────────────────────────────────────────
     BORDERS & RADIUS
     ───────────────────────────────────────────────────────────────────── */

	--radius: 0.5rem;
	--radius-sm: 0.25rem;
	--radius-md: 0.375rem;
	--radius-lg: 0.5rem;
	--radius-xl: 0.75rem;
	--radius-full: 9999px;
}

/* ═══════════════════════════════════════════════════════════════════════
   ROOT VARIABLES - CSS Custom Properties
   ═══════════════════════════════════════════════════════════════════════ */

:root {
	/* Light mode - OKLCH color space for perfect consistency */
	--background: oklch(1 0 0);
	--foreground: oklch(0.13 0.028 261.692);
	--card: oklch(1 0 0);
	--card-foreground: oklch(0.13 0.028 261.692);
	--popover: oklch(1 0 0);
	--popover-foreground: oklch(0.13 0.028 261.692);
	--primary: oklch(0.55 0.25 260);
	--primary-foreground: oklch(1 0 0);
	--secondary: oklch(0.967 0.003 264.542);
	--secondary-foreground: oklch(0.278 0.033 256.848);
	--muted: oklch(0.967 0.003 264.542);
	--muted-foreground: oklch(0.446 0.03 256.802);
	--accent: oklch(0.967 0.003 264.542);
	--accent-foreground: oklch(0.278 0.033 256.848);
	--destructive: oklch(0.637 0.237 25.331);
	--destructive-foreground: oklch(1 0 0);
	--border: oklch(0.872 0.01 258.338);
	--input: oklch(0.872 0.01 258.338);
	--ring: oklch(0.3 0.05 260);
	--radius: 0.5rem;

	/* Chart colors for data viz */
	--chart-1: #dc2626;
	--chart-2: #10b981;
	--chart-3: #3b82f6;
	--chart-4: #f59e0b;
	--chart-5: #8b5cf6;
}

/* Dark mode - OKLCH for smooth transitions */
.dark {
	--background: oklch(0.13 0.028 261.692);
	--foreground: oklch(0.967 0.003 264.542);
	--card: oklch(0.13 0.028 261.692);
	--card-foreground: oklch(0.967 0.003 264.542);
	--popover: oklch(0.13 0.028 261.692);
	--popover-foreground: oklch(0.967 0.003 264.542);
	--primary: oklch(0.789 0.154 211.53);
	--primary-foreground: oklch(0.13 0.028 261.692);
	--secondary: oklch(0.278 0.033 256.848);
	--secondary-foreground: oklch(0.967 0.003 264.542);
	--muted: oklch(0.278 0.033 256.848);
	--muted-foreground: oklch(0.707 0.022 261.325);
	--accent: oklch(0.278 0.033 256.848);
	--accent-foreground: oklch(0.967 0.003 264.542);
	--destructive: oklch(0.718 0.202 349.761);
	--destructive-foreground: oklch(1 0 0);
	--border: oklch(0.278 0.033 256.848);
	--input: oklch(0.278 0.033 256.848);
	--ring: oklch(0.789 0.154 211.53);
}

/* ═══════════════════════════════════════════════════════════════════════
   MOBILE-FIRST UTILITIES
   ═══════════════════════════════════════════════════════════════════════ */

@layer utilities {
	/* Safe area padding for mobile devices */
	.safe-top {
		padding-top: env(safe-area-inset-top);
	}

	.safe-bottom {
		padding-bottom: env(safe-area-inset-bottom);
	}

	.safe-left {
		padding-left: env(safe-area-inset-left);
	}

	.safe-right {
		padding-right: env(safe-area-inset-right);
	}

	/* Bottom navigation with safe area */
	.bottom-nav {
		padding-bottom: env(safe-area-inset-bottom, 20px);
		height: calc(56px + env(safe-area-inset-bottom));
	}

	/* Thumb zone positioning */
	.thumb-zone {
		position: fixed;
		bottom: calc(72px + env(safe-area-inset-bottom));
		right: 16px;
	}

	/* Swipeable galleries */
	.swipe-gallery {
		scroll-snap-type: x mandatory;
		-webkit-overflow-scrolling: touch;
		overscroll-behavior-x: contain;
	}

	.swipe-item {
		scroll-snap-align: start;
	}

	/* Performance optimizations */
	.gpu-accelerated {
		transform: translateZ(0);
		will-change: transform;
	}

	.contain-layout {
		contain: layout;
	}

	.contain-paint {
		contain: paint;
	}

	.contain-strict {
		contain: strict;
	}

	/* Hide scrollbar but keep scroll functionality */
	.scrollbar-hide {
		-ms-overflow-style: none;
		scrollbar-width: none;
	}

	.scrollbar-hide::-webkit-scrollbar {
		display: none;
	}
}

/* ═══════════════════════════════════════════════════════════════════════
   SKELETON LOADERS
   ═══════════════════════════════════════════════════════════════════════ */

@keyframes shimmer {
	0% {
		background-position: -200% 0;
	}
	100% {
		background-position: 200% 0;
	}
}

.skeleton {
	background: linear-gradient(90deg, #f9fafb 25%, #e5e7eb 50%, #f9fafb 75%);
	background-size: 200% 100%;
	animation: shimmer 1.5s infinite;
}

.skeleton-text {
	height: 1em;
	border-radius: 0.25rem;
	background: linear-gradient(90deg, #f9fafb 25%, #e5e7eb 50%, #f9fafb 75%);
	background-size: 200% 100%;
	animation: shimmer 1.5s infinite;
}

.skeleton-card {
	height: 200px;
	border-radius: 0.5rem;
	background: linear-gradient(90deg, #f9fafb 25%, #e5e7eb 50%, #f9fafb 75%);
	background-size: 200% 100%;
	animation: shimmer 1.5s infinite;
}

/* ═══════════════════════════════════════════════════════════════════════
   TRUST INDICATORS
   ═══════════════════════════════════════════════════════════════════════ */


.response-time {
	@apply text-muted-foreground text-xs;
}

.online-indicator {
	@apply relative;
}

.online-indicator::after {
	content: '';
	@apply absolute right-0 bottom-0 h-3 w-3;
	@apply rounded-full border-2 border-white bg-green-500;
}

/* ═══════════════════════════════════════════════════════════════════════
   QUICK ACTIONS (Bulgarian-specific)
   ═══════════════════════════════════════════════════════════════════════ */

.quick-action {
	@apply px-3 py-2 text-sm font-medium;
	@apply rounded-lg border border-gray-200 bg-gray-50;
	@apply active:scale-95;
}

.quick-action-primary {
	@apply rounded-lg px-3 py-2 text-sm font-medium active:scale-95;
	@apply bg-primary border-primary text-white;
}

/* ═══════════════════════════════════════════════════════════════════════
   PERFORMANCE CRITICAL CSS
   ═══════════════════════════════════════════════════════════════════════ */

/* Reduce animation for users who prefer it */
@media (prefers-reduced-motion: reduce) {
	* {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}
}

/* Force hardware acceleration for critical animations */
.animate-in {
	animation-duration: var(--duration-200);
	animation-timing-function: var(--ease-default);
	animation-fill-mode: both;
}

/* ═══════════════════════════════════════════════════════════════════════
   LAYOUT UTILITIES
   ═══════════════════════════════════════════════════════════════════════ */

/* Container with Bulgarian market standards */
.container {
	width: 100%;
	margin-inline: auto;
	padding-inline: 16px;
}

@media (min-width: 640px) {
	.container {
		max-width: 640px;
	}
}

@media (min-width: 768px) {
	.container {
		max-width: 768px;
		padding-inline: 24px;
	}
}

@media (min-width: 1024px) {
	.container {
		max-width: 1024px;
		padding-inline: 32px;
	}
}

@media (min-width: 1280px) {
	.container {
		max-width: 1280px;
	}
}

/* ═══════════════════════════════════════════════════════════════════════
   COMPONENT OVERRIDES - Fix shadcn for marketplace
   ═══════════════════════════════════════════════════════════════════════ */

/* Remove all unnecessary animations */
.accordion-content,
.dialog-content,
.popover-content,
.sheet-content {
	animation: none !important;
}

/* Simplify button styles */
.btn {
	@apply rounded-lg px-4 py-2 font-medium;
	@apply transition-colors duration-200;
}

.btn-primary {
	@apply rounded-lg px-4 py-2 font-medium transition-colors duration-200;
	@apply bg-primary hover:bg-primary/90 text-white;
}

.btn-secondary {
	@apply rounded-lg px-4 py-2 font-medium transition-colors duration-200;
	@apply bg-gray-50 text-gray-900 hover:bg-gray-200;
}

/* Product cards optimized for mobile */
.product-card {
	@apply overflow-hidden rounded-lg bg-white;
	@apply border border-gray-200;
	contain: layout style;
}

.product-card img {
	@apply aspect-[4/3] w-full object-cover;
}

.product-price {
	@apply text-lg font-bold text-gray-900;
}

.product-meta {
	@apply text-muted-foreground text-sm;
}

/* ═══════════════════════════════════════════════════════════════════════
   PRINT STYLES - For order receipts
   ═══════════════════════════════════════════════════════════════════════ */

@media print {
	* {
		background: transparent !important;
		color: black !important;
		box-shadow: none !important;
		text-shadow: none !important;
	}

	a,
	a:visited {
		text-decoration: underline;
	}

	.no-print {
		display: none !important;
	}
}

/* ═══════════════════════════════════════════════════════════════════════
   CLS PREVENTION UTILITIES - Zero Layout Shift Architecture
   ═══════════════════════════════════════════════════════════════════════ */

/* Image CLS Prevention Classes - Use these instead of inline styles */
.img-product {
	width: var(--img-product-size);
	height: var(--img-product-size);
	aspect-ratio: 1;
	object-fit: cover;
	max-width: 100%;
}

.img-story {
	width: var(--img-story-size);
	height: var(--img-story-size);
	aspect-ratio: 1;
	object-fit: cover;
}

.img-avatar-sm {
	width: var(--img-avatar-sm);
	height: var(--img-avatar-sm);
	aspect-ratio: 1;
	object-fit: cover;
	border-radius: 50%;
}

.img-avatar-md {
	width: var(--img-avatar-md);
	height: var(--img-avatar-md);
	aspect-ratio: 1;
	object-fit: cover;
	border-radius: 50%;
}

.img-thumbnail {
	width: var(--img-thumbnail);
	height: var(--img-thumbnail);
	aspect-ratio: 1;
	object-fit: cover;
}

/* Responsive image containers */
.img-container {
	position: relative;
	overflow: hidden;
	background: var(--color-gray-100);
}

.img-container.square { aspect-ratio: 1; }
.img-container.landscape { aspect-ratio: 4/3; }
.img-container.portrait { aspect-ratio: 3/4; }

.img-container img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

/* Skeleton Loading with proper dimensions */
.skeleton {
	background: linear-gradient(
		90deg,
		var(--color-gray-200) 25%,
		var(--color-gray-100) 50%,
		var(--color-gray-200) 75%
	);
	background-size: 200% 100%;
	animation: skeleton-shimmer 1.5s infinite;
}

.skeleton-product {
	width: var(--img-product-size);
	height: var(--img-product-size);
	aspect-ratio: 1;
	max-width: 100%;
}

.skeleton-story {
	width: var(--img-story-size);
	height: var(--img-story-size);
	border-radius: 50%;
}

@keyframes skeleton-shimmer {
	0% { background-position: 200% 0; }
	100% { background-position: -200% 0; }
}

/* Layout spacing utilities */
.header-spacer {
	height: var(--header-height);
}

.search-spacer {
	height: 0;
	overflow: hidden;
	transition: height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.search-spacer.active {
	height: var(--search-bar-height);
}

/* Mobile-specific utilities */
@media (max-width: 640px) {
	.img-story {
		width: var(--img-story-mobile);
		height: var(--img-story-mobile);
	}
	
	.header-spacer {
		height: var(--header-height);
	}
}

@media (min-width: 768px) {
	.header-spacer {
		height: var(--header-height-md);
	}
}
