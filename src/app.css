@import 'tailwindcss';
@import './lib/styles/design-tokens.css';
/* @import './lib/styles/browse-fix.css'; */


/* ═══════════════════════════════════════════════════════════════════════
   BASE TYPOGRAPHY & RENDERING
   ═══════════════════════════════════════════════════════════════════════ */

body {
	font-family: var(--font-sans);
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	text-rendering: optimizeLegibility;
	font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
	font-variant-ligatures: common-ligatures contextual;
	letter-spacing: -0.011em;
	line-height: 1.5;
}


/* ═══════════════════════════════════════════════════════════════════════
   MOBILE-FIRST UTILITIES
   ═══════════════════════════════════════════════════════════════════════ */

@layer utilities {
	/* Safe area padding for mobile devices */
	.safe-top {
		padding-top: env(safe-area-inset-top);
	}

	.safe-bottom {
		padding-bottom: env(safe-area-inset-bottom);
	}

	.safe-left {
		padding-left: env(safe-area-inset-left);
	}

	.safe-right {
		padding-right: env(safe-area-inset-right);
	}

	/* Bottom navigation with safe area */
	.bottom-nav {
		padding-bottom: env(safe-area-inset-bottom, 20px);
		height: calc(56px + env(safe-area-inset-bottom));
	}

	/* Thumb zone positioning */
	.thumb-zone {
		position: fixed;
		bottom: calc(72px + env(safe-area-inset-bottom));
		right: 16px;
	}

	/* Swipeable galleries */
	.swipe-gallery {
		scroll-snap-type: x mandatory;
		-webkit-overflow-scrolling: touch;
		overscroll-behavior-x: contain;
	}

	.swipe-item {
		scroll-snap-align: start;
	}

	/* Performance optimizations */
	.gpu-accelerated {
		transform: translateZ(0);
		will-change: transform;
	}

	.contain-layout {
		contain: layout;
	}

	.contain-paint {
		contain: paint;
	}

	.contain-strict {
		contain: strict;
	}

	/* Hide scrollbar but keep scroll functionality */
	.scrollbar-hide {
		-ms-overflow-style: none;
		scrollbar-width: none;
	}

	.scrollbar-hide::-webkit-scrollbar {
		display: none;
	}
	
	/* Alternative scrollbar hiding utility */
	.scrollbar-none {
		scrollbar-width: none;
		-ms-overflow-style: none;
	}
	.scrollbar-none::-webkit-scrollbar {
		display: none;
	}
}

/* ═══════════════════════════════════════════════════════════════════════
   SKELETON LOADERS
   ═══════════════════════════════════════════════════════════════════════ */

@keyframes shimmer {
	0% {
		background-position: -200% 0;
	}
	100% {
		background-position: 200% 0;
	}
}

.skeleton {
	background: linear-gradient(90deg, #f9fafb 25%, #e5e7eb 50%, #f9fafb 75%);
	background-size: 200% 100%;
	animation: shimmer 1.5s infinite;
}

.skeleton-text {
	height: 1em;
	border-radius: 0.25rem;
	background: linear-gradient(90deg, #f9fafb 25%, #e5e7eb 50%, #f9fafb 75%);
	background-size: 200% 100%;
	animation: shimmer 1.5s infinite;
}

.skeleton-card {
	height: 200px;
	border-radius: 0.5rem;
	background: linear-gradient(90deg, #f9fafb 25%, #e5e7eb 50%, #f9fafb 75%);
	background-size: 200% 100%;
	animation: shimmer 1.5s infinite;
}

/* ═══════════════════════════════════════════════════════════════════════
   TRUST INDICATORS
   ═══════════════════════════════════════════════════════════════════════ */


.response-time {
	@apply text-muted-foreground text-xs;
}

.online-indicator {
	@apply relative;
}

.online-indicator::after {
	content: '';
	@apply absolute right-0 bottom-0 h-3 w-3;
	@apply rounded-full border-2 border-white bg-green-500;
}

/* ═══════════════════════════════════════════════════════════════════════
   QUICK ACTIONS (Bulgarian-specific)
   ═══════════════════════════════════════════════════════════════════════ */

.quick-action {
	@apply px-3 py-2 text-sm font-medium;
	@apply rounded-lg border border-gray-200 bg-gray-50;
	@apply active:scale-95;
}

.quick-action-primary {
	@apply rounded-lg px-3 py-2 text-sm font-medium active:scale-95;
	@apply bg-primary border-primary text-white;
}

/* ═══════════════════════════════════════════════════════════════════════
   PERFORMANCE CRITICAL CSS
   ═══════════════════════════════════════════════════════════════════════ */

/* Reduce animation for users who prefer it */
@media (prefers-reduced-motion: reduce) {
	* {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}
}

/* Force hardware acceleration for critical animations */
.animate-in {
	animation-duration: var(--duration-200);
	animation-timing-function: var(--ease-default);
	animation-fill-mode: both;
}

/* ═══════════════════════════════════════════════════════════════════════
   LAYOUT UTILITIES
   ═══════════════════════════════════════════════════════════════════════ */

/* Container with Bulgarian market standards */
.container {
	width: 100%;
	margin-inline: auto;
	padding-inline: 16px;
}

@media (min-width: 640px) {
	.container {
		max-width: 640px;
	}
}

@media (min-width: 768px) {
	.container {
		max-width: 768px;
		padding-inline: 24px;
	}
}

@media (min-width: 1024px) {
	.container {
		max-width: 1024px;
		padding-inline: 32px;
	}
}

@media (min-width: 1280px) {
	.container {
		max-width: 1280px;
	}
}

/* ═══════════════════════════════════════════════════════════════════════
   COMPONENT OVERRIDES - Fix shadcn for marketplace
   ═══════════════════════════════════════════════════════════════════════ */

/* Remove all unnecessary animations */
.accordion-content,
.dialog-content,
.popover-content,
.sheet-content {
	animation: none !important;
}

/* Simplify button styles */
.btn {
	@apply rounded-lg px-4 py-2 font-medium;
	@apply transition-colors duration-200;
}

.btn-primary {
	@apply rounded-lg px-4 py-2 font-medium transition-colors duration-200;
	@apply bg-primary hover:bg-primary/90 text-white;
}

.btn-secondary {
	@apply rounded-lg px-4 py-2 font-medium transition-colors duration-200;
	@apply bg-gray-50 text-gray-900 hover:bg-gray-200;
}

/* Product cards optimized for mobile */
.product-card {
	@apply overflow-hidden rounded-lg bg-white;
	@apply border border-gray-200;
	contain: layout style;
}

.product-card img {
	@apply aspect-[4/3] w-full object-cover;
}

.product-price {
	@apply text-lg font-bold text-gray-900;
}

.product-meta {
	@apply text-muted-foreground text-sm;
}

/* ═══════════════════════════════════════════════════════════════════════
   PRINT STYLES - For order receipts
   ═══════════════════════════════════════════════════════════════════════ */

@media print {
	* {
		background: transparent !important;
		color: black !important;
		box-shadow: none !important;
		text-shadow: none !important;
	}

	a,
	a:visited {
		text-decoration: underline;
	}

	.no-print {
		display: none !important;
	}
}

/* ═══════════════════════════════════════════════════════════════════════
   CLS PREVENTION UTILITIES - Zero Layout Shift Architecture
   ═══════════════════════════════════════════════════════════════════════ */

/* Image CLS Prevention Classes - Use these instead of inline styles */
.img-product {
	width: var(--img-product-size);
	height: var(--img-product-size);
	aspect-ratio: 1;
	object-fit: cover;
	max-width: 100%;
}

.img-story {
	width: var(--img-story-size);
	height: var(--img-story-size);
	aspect-ratio: 1;
	object-fit: cover;
}

.img-avatar-sm {
	width: var(--img-avatar-sm);
	height: var(--img-avatar-sm);
	aspect-ratio: 1;
	object-fit: cover;
	border-radius: 50%;
}

.img-avatar-md {
	width: var(--img-avatar-md);
	height: var(--img-avatar-md);
	aspect-ratio: 1;
	object-fit: cover;
	border-radius: 50%;
}

.img-thumbnail {
	width: var(--img-thumbnail);
	height: var(--img-thumbnail);
	aspect-ratio: 1;
	object-fit: cover;
}

/* Responsive image containers */
.img-container {
	position: relative;
	overflow: hidden;
	background: var(--color-gray-100);
}

.img-container.square { aspect-ratio: 1; }
.img-container.landscape { aspect-ratio: 4/3; }
.img-container.portrait { aspect-ratio: 3/4; }

.img-container img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

/* Skeleton Loading with proper dimensions */
.skeleton {
	background: linear-gradient(
		90deg,
		var(--color-gray-200) 25%,
		var(--color-gray-100) 50%,
		var(--color-gray-200) 75%
	);
	background-size: 200% 100%;
	animation: skeleton-shimmer 1.5s infinite;
}

.skeleton-product {
	width: var(--img-product-size);
	height: var(--img-product-size);
	aspect-ratio: 1;
	max-width: 100%;
}

.skeleton-story {
	width: var(--img-story-size);
	height: var(--img-story-size);
	border-radius: 50%;
}

@keyframes skeleton-shimmer {
	0% { background-position: 200% 0; }
	100% { background-position: -200% 0; }
}

/* Layout spacing utilities */
.header-spacer {
	height: var(--header-height);
}

.search-spacer {
	height: 0;
	overflow: hidden;
	transition: height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.search-spacer.active {
	height: var(--search-bar-height);
}

/* Mobile-specific utilities */
@media (max-width: 640px) {
	.img-story {
		width: var(--img-story-mobile);
		height: var(--img-story-mobile);
	}
	
	.header-spacer {
		height: var(--header-height);
	}
}

@media (min-width: 768px) {
	.header-spacer {
		height: var(--header-height-md);
	}
}
